<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Database Tools</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Database Tools</h1>



<div id="overview-of-fiesta-database-db-tools" class="section level3">
<h3>Overview of FIESTA Database (DB) tools</h3>
<p>FIESTA’s DB tools extract data from FIA’s online publicly-available,
comma-delimited files (*.csv or *.zip). FIA’s CSV files are available by
state from the FIA DataMart at the following link: <a href="https://apps.fs.usda.gov/fia/datamart/datamart.html" class="uri">https://apps.fs.usda.gov/fia/datamart/datamart.html</a>.
Because of FIA’s confidentiality agreement to protect the privacy of
landowners, as well as protecting the scientific integrity of FIA’s
sample design, the exact coordinates of the sample plot locations are
not included in the public data. If the exact coordinates are necessary
for your analysis, contact FIA’s Spatial Data Services (<a href="https://research.fs.usda.gov/programs/fia/sds" class="uri">https://research.fs.usda.gov/programs/fia/sds</a>).</p>
</div>
<div id="objective-of-tutorial" class="section level3">
<h3>Objective of tutorial</h3>
<p>The objective of this tutorial is to demonstrate the use of FIESTA’s
DB tools for accessing FIA data. These tools extract data from FIA
Datamart using FIA’s standard evaluations as well as customized
evaluations.</p>
<p>An FIA Evaluation is a group of plots within the FIA database that is
used for population estimates. An FIA Evaluation represents different
inventory spans of data with different stratification and area
adjustments for nonreponse. Each Evaluation is determined by the type of
estimation (evalType) including: area and tree estimates, growth and
mortality estimates, and area change estimates (evalType). These plots
are identified by an evalid, which is a unique identifier in the format
of a 2-digit State code, a 2-digit year code, and a 2-digit evaluation
type code. For example, EVALID ‘491601’ represents the Utah 2016
evaluation for current area estimates.</p>
<table>
<colgroup>
<col width="18%" />
<col width="81%" />
</colgroup>
<thead>
<tr class="header">
<th>FUNCTION</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="#DBgetCSV">DBgetCSV()</a></td>
<td>Downloads comma-delimited file (.csv) or downloads and extracts a
compressed csv file (.zip) from FIA’s online DataMart.</td>
</tr>
<tr class="even">
<td><a href="#DBqryCSV">DBqryCSV()</a></td>
<td>Extracts and queries data from FIA’s online DataMart, either CSV or
ZIP files.</td>
</tr>
<tr class="odd">
<td><a href="#DBgetEvalid">DBgetEvalid()</a></td>
<td>Gets evalid for identifying an estimation group of plots for state
or checks evalid.</td>
</tr>
<tr class="even">
<td><a href="#DBgetXY">DBgetXY()</a></td>
<td>Extracts XY data from FIA database.</td>
</tr>
<tr class="odd">
<td><a href="#DBgetPlots">DBgetPlots()</a></td>
<td>Extracts inventory plot data from FIA database.</td>
</tr>
<tr class="even">
<td><a href="#DBgetStrata">DBgetStrata()</a></td>
<td>Extracts strata information and total acres by estimation unit from
FIA database, including plot-level assignment and a data frame with
strata weights by estimation unit.</td>
</tr>
</tbody>
</table>
</div>
<div id="set-up" class="section level3">
<h3>Set up</h3>
<p>First, you’ll need to load the <code>FIESTA</code> library:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(FIESTA)</span></code></pre></div>
<p>Next, you’ll need to set up an “outfolder”. This is just a file path
to a folder where you’d like <code>FIESTA</code> to send your data
output. For this vignette, we have saved our outfolder file path as the
<code>outfolder</code> object in a temporary directory. We also set a
few default options preferred for this vignette.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>outfolder <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span></code></pre></div>
</div>
<div id="db-examples" class="section level2">
<h2>DB Examples</h2>
<p>The following examples show how to extract data from FIA’s
publicly-available, online DataMart. Data can be returned as R objects
or exported to CSV (.csv) files or a SQLite (.sqlite) database. The zip
files are extracted on-the-fly from the online website. Web server
connections will affect download speeds. We show examples for the
following functions:</p>
<p>The following examples extract data from FIA’s online DataMart (<a href="https://apps.fs.usda.gov/fia/datamart/datamart.html" class="uri">https://apps.fs.usda.gov/fia/datamart/datamart.html</a>).</p>
<p>Note that while <code>datsource = &#39;datamart&#39;</code> is utilized for
these examples, <code>datsource</code> can be set to ‘sqlite’ with
<code>datsource_dsn</code> set to the local file path for the FIADB file
to achieve the same results.</p>
<div id="dbgetcsv" class="section level3">
<h3><a name="DBgetCSV"></a><code>DBgetCSV()</code></h3>
<p>The <code>DBgetCSV</code> function extracts data from FIA’s
publicly-available, online DataMart CSV/ZIP files. The zip files are
extracted on-the-fly from the online website. Web server connections
will affect download speeds.</p>
<div id="example-1-extract-plot-data-for-wyoming-and-utah" class="section level4">
<h4>Example 1: Extract PLOT data for Wyoming and Utah</h4>
<details>
<summary>
View Example
</summary>
</div>
<div id="dbgetcsv-1" class="section level4">
<h4><a name="DBgetCSV"></a>DBgetCSV()</h4>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="do">## Get plot table for Wyoming</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>WYplots <span class="ot">&lt;-</span> <span class="fu">DBgetCSV</span>(<span class="st">&quot;PLOT&quot;</span>, <span class="st">&quot;Wyoming&quot;</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">dim</span>(WYplots)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="do">## Get plot table for Wyoming and Utah</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>WYUTplots <span class="ot">&lt;-</span> <span class="fu">DBgetCSV</span>(<span class="at">DBtable =</span> <span class="st">&quot;PLOT&quot;</span>, </span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>                      <span class="at">states =</span> <span class="fu">c</span>(<span class="st">&quot;Wyoming&quot;</span>, <span class="st">&quot;Utah&quot;</span>))</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="fu">table</span>(WYUTplots<span class="sc">$</span>STATECD)</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="do">## Get survey table for Wyoming</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>WYsurvey <span class="ot">&lt;-</span> <span class="fu">DBgetCSV</span>(<span class="st">&quot;SURVEY&quot;</span>, <span class="st">&quot;Wyoming&quot;</span>)</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>WYsurvey</span></code></pre></div>
</details>
</div>
</div>
<div id="dbqrycsv" class="section level3">
<h3><a name="DBqryCSV"></a><code>DBqryCSV()</code></h3>
<p>The <code>DBqryCSV</code> function queries a table from FIA’s online
publicly-available DataMart. The tables in the query must be specified
in the sqltables parameter.</p>
<div id="example-multiple-uses" class="section level4">
<h4>Example: Multiple Uses</h4>
<details>
<summary>
View Example
</summary>
</div>
<div id="dbqrycsv-1" class="section level4">
<h4><a name="DBqryCSV"></a>DBqryCSV()</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Get number of plots by inventory year for the state of Wyoming</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>sql1 <span class="ot">&lt;-</span> <span class="st">&quot;SELECT INVYR, COUNT(*) AS NBRPLOTS </span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="st">         FROM PLOT </span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="st">         WHERE statecd = 56</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="st">         GROUP BY INVYR&quot;</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>nplots1 <span class="ot">&lt;-</span> <span class="fu">DBqryCSV</span>(<span class="at">sql =</span> sql1, </span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>                    <span class="at">states =</span> <span class="st">&quot;Wyoming&quot;</span>, </span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>                    <span class="at">sqltables =</span> <span class="st">&quot;PLOT&quot;</span>)</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="fu">head</span>(nplots1)</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co"># Get number of plots by inventory year for Vermont and New Hampshire</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a>sql2 <span class="ot">&lt;-</span> <span class="st">&quot;SELECT STATECD, INVYR, COUNT(*) NBRPLOTS </span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="st">         FROM PLOT </span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="st">         WHERE statecd IN(50,33) </span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="st">         GROUP BY STATECD, INVYR&quot;</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>nplots2 <span class="ot">&lt;-</span> <span class="fu">DBqryCSV</span>(<span class="at">sql =</span> sql2, </span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a>                    <span class="at">states =</span> <span class="fu">c</span>(<span class="st">&quot;Vermont&quot;</span>, <span class="st">&quot;New Hampshire&quot;</span>), </span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a>                    <span class="at">sqltables =</span> <span class="st">&quot;PLOT&quot;</span>)</span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a><span class="fu">head</span>(nplots2)</span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a></span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a><span class="co"># Get number of plots by inventory year for Iowa (stcd=19) that have silver maple (SPCD=317)</span></span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a>sql3 <span class="ot">&lt;-</span> <span class="st">&quot;SELECT p.STATECD, p.INVYR, COUNT(*) NBRPLOTS </span></span>
<span id="cb4-27"><a href="#cb4-27" tabindex="-1"></a><span class="st">         FROM PLOT p </span></span>
<span id="cb4-28"><a href="#cb4-28" tabindex="-1"></a><span class="st">         JOIN TREE t ON p.CN = t.PLT_CN </span></span>
<span id="cb4-29"><a href="#cb4-29" tabindex="-1"></a><span class="st">         WHERE p.statecd = 19 AND t.SPCD = 317</span></span>
<span id="cb4-30"><a href="#cb4-30" tabindex="-1"></a><span class="st">         GROUP BY p.STATECD, p.INVYR&quot;</span></span>
<span id="cb4-31"><a href="#cb4-31" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" tabindex="-1"></a>nplots3 <span class="ot">&lt;-</span> <span class="fu">DBqryCSV</span>(<span class="at">sql =</span> sql3, </span>
<span id="cb4-33"><a href="#cb4-33" tabindex="-1"></a>                    <span class="at">states =</span> <span class="st">&quot;IOWA&quot;</span>, </span>
<span id="cb4-34"><a href="#cb4-34" tabindex="-1"></a>                    <span class="at">sqltables =</span> <span class="fu">c</span>(<span class="st">&quot;PLOT&quot;</span>, <span class="st">&quot;TREE&quot;</span>))</span>
<span id="cb4-35"><a href="#cb4-35" tabindex="-1"></a></span>
<span id="cb4-36"><a href="#cb4-36" tabindex="-1"></a><span class="fu">head</span>(nplots3)</span></code></pre></div>
</details>
</div>
</div>
<div id="dbgetevalid" class="section level3">
<h3><a name="DBgetEvalid"></a><code>DBgetEvalid()</code></h3>
<p>The <code>DBgetEvalid</code> function gets information for FIA
Evaluations.</p>
<div id="example-1-get-most-current-evalid-and-inventory-years-for-wyoming" class="section level4">
<h4>Example 1: Get most current evalid and inventory years for
Wyoming</h4>
<details>
<summary>
View Example
</summary>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>WYeval <span class="ot">&lt;-</span> <span class="fu">DBgetEvalid</span>(<span class="at">states =</span> <span class="st">&quot;Wyoming&quot;</span>,</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>                      <span class="at">evalCur =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="fu">names</span>(WYeval)</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>WYeval<span class="sc">$</span>evalidlist</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>WYeval<span class="sc">$</span>invyrs</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>WYeval<span class="sc">$</span>invyrtab</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>WYeval<span class="sc">$</span>invtype</span></code></pre></div>
</details>
</div>
<div id="example-2-get-most-current-evaluations-for-new-york-for-vol-and-grm-evaltypes" class="section level4">
<h4>Example 2: Get most current evaluations for New York for VOL and GRM
evalTypes</h4>
<details>
<summary>
View Example
</summary>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>NYeval <span class="ot">&lt;-</span> <span class="fu">DBgetEvalid</span>(<span class="at">states =</span> <span class="fu">c</span>(<span class="st">&quot;New York&quot;</span>), </span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>                      <span class="at">evalType =</span> <span class="fu">c</span>(<span class="st">&quot;VOL&quot;</span>, <span class="st">&quot;GRM&quot;</span>),</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>                      <span class="at">evalCur =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="fu">names</span>(NYeval)</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>NYeval<span class="sc">$</span>evalidlist</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>NYeval<span class="sc">$</span>evalTypelist</span></code></pre></div>
</details>
</div>
</div>
<div id="dbgetxy" class="section level3">
<h3><a name="DBgetXY"></a><code>DBgetXY()</code></h3>
<p>The <code>DBgetXY</code> function queries XY public coordinate data
from FIA’ online publicly-available DataMart or SQLite database.</p>
<div id="example1-get-xy-data-for-the-state-of-wyoming-for-the-most-current-evaluation" class="section level4">
<h4>Example1: Get xy data for the state of Wyoming for the most current
evaluation</h4>
<details>
<summary>
View Example
</summary>
</div>
<div id="dbgetxy-1" class="section level4">
<h4><a name="DBgetXY"></a>DBgetXY()</h4>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>xydat1 <span class="ot">&lt;-</span> <span class="fu">DBgetXY</span>(<span class="at">states =</span> <span class="st">&quot;Wyoming&quot;</span>, </span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>                  <span class="at">datsource =</span> <span class="st">&quot;datamart&quot;</span>,</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>                  <span class="at">eval =</span> <span class="st">&quot;FIA&quot;</span>,</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>                  <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">Cur =</span> <span class="cn">TRUE</span>))</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="fu">names</span>(xydat1)</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="fu">head</span>(xydat1<span class="sc">$</span>xyCur_PUBLIC)</span></code></pre></div>
</details>
</div>
<div id="example-2-add-a-variable-in-plot-table-plot_status_cd-and-output-as-a-spatial-object" class="section level4">
<h4>Example 2: Add a variable in plot table (PLOT_STATUS_CD) and output
as a spatial object</h4>
<details>
<summary>
View Example
</summary>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>xydat2 <span class="ot">&lt;-</span> <span class="fu">DBgetXY</span>(<span class="at">states =</span> <span class="st">&quot;Wyoming&quot;</span>, </span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>                  <span class="at">datsource =</span> <span class="st">&quot;datamart&quot;</span>,</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>                  <span class="at">eval =</span> <span class="st">&quot;FIA&quot;</span>,</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>                  <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">Cur =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>                  <span class="at">pvars2keep =</span> <span class="fu">c</span>(<span class="st">&quot;PLOT_STATUS_CD&quot;</span>),</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>                  <span class="at">issp =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>spxy2 <span class="ot">&lt;-</span> xydat2<span class="sc">$</span>spxy</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="do">## Display points with by PLOT_STATUS_CD (1-light blue; 2-brown; 3-blue)</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>spxy2<span class="sc">$</span>color <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(spxy2<span class="sc">$</span>PLOT_STATUS_CD <span class="sc">==</span> <span class="dv">2</span>, <span class="st">&quot;brown&quot;</span>, </span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>                      <span class="fu">ifelse</span>(spxy2<span class="sc">$</span>PLOT_STATUS_CD <span class="sc">==</span> <span class="dv">3</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;light blue&quot;</span>))</span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="fu">plot</span>(sf<span class="sc">::</span><span class="fu">st_geometry</span>(spxy2[<span class="st">&#39;PLOT_STATUS_CD&#39;</span>]), <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">cex =</span> .<span class="dv">5</span>,</span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>                     <span class="at">col =</span> spxy2<span class="sc">$</span>color)</span></code></pre></div>
</details>
</div>
<div id="example-3-get-xy-data-for-wyoming-inventory-years-2015-to-2019" class="section level4">
<h4>Example 3: Get XY data for Wyoming, inventory years 2015 to
2019</h4>
<details>
<summary>
View Example
</summary>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>xydat3 <span class="ot">&lt;-</span> <span class="fu">DBgetXY</span>(<span class="at">states =</span> <span class="st">&quot;Vermont&quot;</span>, </span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>                  <span class="at">datsource =</span> <span class="st">&quot;datamart&quot;</span>,</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>                  <span class="at">eval =</span> <span class="st">&quot;custom&quot;</span>,</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>                  <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">invyrs =</span> <span class="dv">2017</span><span class="sc">:</span><span class="dv">2019</span>),</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>                  <span class="at">issp =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>spxy3 <span class="ot">&lt;-</span> xydat3<span class="sc">$</span>spxy</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="do">## Display points </span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="fu">plot</span>(sf<span class="sc">::</span><span class="fu">st_geometry</span>(spxy3), <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">cex =</span> .<span class="dv">5</span>, <span class="at">col=</span><span class="st">&quot;grey&quot;</span>)</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="do">## Now only include P2 plots only (intensity1 = TRUE)</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>xydat3b <span class="ot">&lt;-</span> <span class="fu">DBgetXY</span>(<span class="at">states =</span> <span class="st">&quot;Vermont&quot;</span>, </span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>                   <span class="at">datsource =</span> <span class="st">&quot;datamart&quot;</span>,</span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>                   <span class="at">eval =</span> <span class="st">&quot;custom&quot;</span>,</span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>                   <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">invyrs =</span> <span class="dv">2017</span><span class="sc">:</span><span class="dv">2019</span>),</span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>                   <span class="at">intensity1 =</span> <span class="cn">TRUE</span>,</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>                   <span class="at">issp =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>spxy3b <span class="ot">&lt;-</span> xydat3b<span class="sc">$</span>spxy</span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a><span class="do">## Display points </span></span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a><span class="fu">plot</span>(sf<span class="sc">::</span><span class="fu">st_geometry</span>(spxy3b), <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">cex =</span> .<span class="dv">5</span>)</span></code></pre></div>
</details>
</div>
</div>
<div id="dbgetplots" class="section level3">
<h3><a name="DBgetPlots"></a><code>DBgetPlots()</code></h3>
<p>The <code>DBgetPlots</code> function extracts plot-level data from
FIA’s online DataMart or SQLite database.</p>
<div id="example-1-get-data-for-rhode-island-most-current-fia-evaluation-all-plots." class="section level4">
<h4>Example 1: Get data for Rhode Island, most current FIA Evaluation,
all plots.</h4>
<details>
<summary>
View Example
</summary>
</div>
<div id="dbgetplots-1" class="section level4">
<h4><a name="DBgetPlots"></a>DBgetPlots()</h4>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>dat1 <span class="ot">&lt;-</span> <span class="fu">DBgetPlots</span>(<span class="at">states =</span> <span class="st">&quot;Rhode Island&quot;</span>, </span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>                   <span class="at">datsource =</span> <span class="st">&quot;datamart&quot;</span>,</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>                   <span class="at">eval =</span> <span class="st">&quot;FIA&quot;</span>, </span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>                   <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">Cur =</span> <span class="cn">TRUE</span>, </span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>                                            <span class="at">Type =</span> <span class="st">&quot;ALL&quot;</span>),</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>                   <span class="at">issp =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="fu">names</span>(dat1)</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>plt1 <span class="ot">&lt;-</span> dat1<span class="sc">$</span>tabs<span class="sc">$</span>plt</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>spxy1 <span class="ot">&lt;-</span> dat1<span class="sc">$</span>xyCur_PUBLIC</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="fu">table</span>(plt1<span class="sc">$</span>INVYR)</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="co"># Display spatial output</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a><span class="fu">plot</span>(sf<span class="sc">::</span><span class="fu">st_geometry</span>(spxy1), <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">cex =</span> .<span class="dv">5</span>)</span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Add a filter to include only plots with Northern red oak forest type (FORTYPCD == 505)</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co"># Note: *allFilter* filters for plots and/or conditions for all states specified.</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>dat1b <span class="ot">&lt;-</span> <span class="fu">DBgetPlots</span>(<span class="at">states =</span> <span class="st">&quot;Rhode Island&quot;</span>, </span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>                    <span class="at">datsource =</span> <span class="st">&quot;datamart&quot;</span>,</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>                    <span class="at">eval =</span> <span class="st">&quot;FIA&quot;</span>,</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>                    <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">Cur =</span> <span class="cn">TRUE</span>, </span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>                                             <span class="at">Type =</span> <span class="st">&quot;ALL&quot;</span>),</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>                    <span class="at">issp =</span> <span class="cn">TRUE</span>, </span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>                    <span class="at">allFilter =</span> <span class="st">&quot;FORTYPCD == 505&quot;</span>)</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="fu">names</span>(dat1b)</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a>spxy1b <span class="ot">&lt;-</span> dat1b<span class="sc">$</span>xyCur_PUBLIC</span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="fu">dim</span>(spxy1b)</span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="co"># Display spatial output</span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="fu">plot</span>(sf<span class="sc">::</span><span class="fu">st_geometry</span>(spxy1b), <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">cex =</span> .<span class="dv">5</span>, <span class="at">col=</span><span class="st">&quot;darkgreen&quot;</span>)</span></code></pre></div>
</details>
</div>
<div id="example-3-get-data-for-delaware-most-current-fia-evaluation-include-plotgeom-data-and-subplot-tables" class="section level4">
<h4>Example 3: Get data for Delaware, most current FIA Evaluation,
include plotgeom data and subplot tables</h4>
<details>
<summary>
View Example
</summary>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>dat2 <span class="ot">&lt;-</span> <span class="fu">DBgetPlots</span>(<span class="at">states =</span> <span class="st">&quot;Delaware&quot;</span>, </span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>                   <span class="at">datsource =</span> <span class="st">&quot;datamart&quot;</span>,</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>                   <span class="at">eval =</span> <span class="st">&quot;FIA&quot;</span>,</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>                   <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">Cur =</span> <span class="cn">TRUE</span>, </span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>                                            <span class="at">Type =</span> <span class="st">&quot;ALL&quot;</span>),</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>                   <span class="at">issubp =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>                   <span class="at">addplotgeom =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="fu">names</span>(dat2)</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>tabs2 <span class="ot">&lt;-</span> dat2<span class="sc">$</span>tabs</span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>plt2 <span class="ot">&lt;-</span> tabs2<span class="sc">$</span>plt</span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="do">## subplot and subp_cond tables are added to tabs list</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="fu">names</span>(tabs2)</span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="do">## PLOTGEOM data are appended to plt table (e.g., ALP_ADFORCD, FVS_VARIANT)</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="fu">head</span>(plt2)</span></code></pre></div>
</details>
</div>
<div id="example-3-get-data-for-delaware-most-current-fia-evaluation-include-pop-tables" class="section level4">
<h4>Example 3: Get data for Delaware, most current FIA Evaluation,
include pop tables</h4>
<details>
<summary>
View Example
</summary>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>dat3 <span class="ot">&lt;-</span> <span class="fu">DBgetPlots</span>(<span class="at">states =</span> <span class="st">&quot;Delaware&quot;</span>, </span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>                   <span class="at">datsource =</span> <span class="st">&quot;datamart&quot;</span>,</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>                   <span class="at">eval =</span> <span class="st">&quot;FIA&quot;</span>,</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>                   <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">Cur =</span> <span class="cn">TRUE</span>, </span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>                                            <span class="at">Type =</span> <span class="st">&quot;ALL&quot;</span>),</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>                   <span class="at">savePOP =</span> <span class="cn">TRUE</span>,</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>                   <span class="at">othertables =</span> <span class="fu">c</span>(<span class="st">&quot;POP_STRATUM&quot;</span>, <span class="st">&quot;POP_ESTN_UNIT&quot;</span>))</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="do">## savePOP = TRUE, saves the POP_PLOT_STRATUM_ASSGN table used to select plots </span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="fu">names</span>(dat3)</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="do">## pop_stratum and pop_estn_unit tables are added to tabs list</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>tabs3 <span class="ot">&lt;-</span> dat3<span class="sc">$</span>tabs</span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="fu">names</span>(tabs3)</span></code></pre></div>
</details>
</div>
<div id="example-4-export-plot-level-data-to-a-csv-file" class="section level4">
<h4>Example 4: Export plot-level data to a CSV file</h4>
<details>
<summary>
View Example
</summary>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">DBgetPlots</span>(<span class="at">states =</span> <span class="st">&quot;Rhode Island&quot;</span>, </span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>           <span class="at">datsource =</span> <span class="st">&quot;datamart&quot;</span>,</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>           <span class="at">eval =</span> <span class="st">&quot;FIA&quot;</span>,</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>           <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">Cur =</span> <span class="cn">TRUE</span>, </span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>                                    <span class="at">Type =</span> <span class="st">&quot;ALL&quot;</span>),</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>           <span class="at">returndata =</span> <span class="cn">FALSE</span>,</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>           <span class="at">savedata =</span> <span class="cn">TRUE</span>,</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>           <span class="at">savedata_opts =</span> <span class="fu">savedata_options</span>(<span class="at">outfolder =</span> outfolder, </span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>                                            <span class="at">out_fmt =</span> <span class="st">&quot;csv&quot;</span>,</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>                                            <span class="at">overwrite_layer =</span> <span class="cn">TRUE</span>))</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="do">## Read in data from outfolder</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>plt <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">file.path</span>(outfolder, <span class="st">&quot;plot.csv&quot;</span>), <span class="at">stringsAsFactors=</span><span class="cn">FALSE</span>)</span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="fu">head</span>(plt)</span></code></pre></div>
</details>
</div>
<div id="example-5-most-current-evaluation-for-multiple-evaltypes-all-vol-grm" class="section level4">
<h4>Example 5: Most current evaluation for multiple evalTypes (‘ALL’,
‘VOL’, ‘GRM’)</h4>
<details>
<summary>
View Example
</summary>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>dat5 <span class="ot">&lt;-</span> <span class="fu">DBgetPlots</span>(<span class="at">states =</span> <span class="st">&quot;Rhode Island&quot;</span>, </span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>                   <span class="at">datsource =</span> <span class="st">&quot;datamart&quot;</span>,</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>                   <span class="at">eval =</span> <span class="st">&quot;FIA&quot;</span>,</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>                   <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">Cur =</span> <span class="cn">TRUE</span>, </span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>                                            <span class="at">Type =</span> <span class="fu">c</span>(<span class="st">&quot;VOL&quot;</span>, <span class="st">&quot;CHNG&quot;</span>, <span class="st">&quot;P2VEG&quot;</span>)))</span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="fu">names</span>(dat5)</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>tabs5 <span class="ot">&lt;-</span> dat5<span class="sc">$</span>tabs</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="fu">names</span>(tabs5)</span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a>ppsa5 <span class="ot">&lt;-</span> dat5<span class="sc">$</span>pop_plot_stratum_assgn</span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="fu">table</span>(ppsa5<span class="sc">$</span>EVALID)</span></code></pre></div>
</details>
</div>
<div id="example-6-get-data-for-a-set-of-evalids" class="section level4">
<h4>Example 6: Get data for a set of evalids</h4>
<details>
<summary>
View Example
</summary>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>dat6 <span class="ot">&lt;-</span> <span class="fu">DBgetPlots</span>(<span class="at">eval =</span> <span class="st">&quot;FIA&quot;</span>,</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>                   <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">Cur =</span> <span class="cn">TRUE</span>, </span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>                                            <span class="at">evalid =</span> <span class="fu">c</span>(<span class="dv">101800</span>, <span class="dv">101801</span>, <span class="dv">101803</span>)))</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="fu">names</span>(dat6)</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>tabs6 <span class="ot">&lt;-</span> dat6<span class="sc">$</span>tabs</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="fu">names</span>(tabs6)</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>ppsa6 <span class="ot">&lt;-</span> dat6<span class="sc">$</span>pop_plot_stratum_assgn</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a><span class="fu">table</span>(ppsa6<span class="sc">$</span>EVALID)</span></code></pre></div>
</details>
</div>
<div id="example-7-get-data-by-endyr" class="section level4">
<h4>Example 7: Get data by Endyr</h4>
<details>
<summary>
View Example
</summary>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>dat7 <span class="ot">&lt;-</span> <span class="fu">DBgetPlots</span>(<span class="at">states =</span> <span class="fu">c</span>(<span class="st">&quot;Connecticut&quot;</span>), </span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>                   <span class="at">eval =</span> <span class="st">&quot;FIA&quot;</span>,</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>                   <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">evalType =</span> <span class="st">&quot;ALL&quot;</span>,</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>                                            <span class="at">Endyr =</span> <span class="dv">2017</span>))</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="fu">names</span>(dat7)</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>tabs7 <span class="ot">&lt;-</span> dat7<span class="sc">$</span>tabs</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a><span class="fu">names</span>(tabs7)</span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>ppsa7 <span class="ot">&lt;-</span> dat7<span class="sc">$</span>pop_plot_stratum_assgn</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a><span class="fu">table</span>(ppsa7<span class="sc">$</span>EVALID)</span></code></pre></div>
</details>
</div>
<div id="example-8-get-data-for-multiple-inventory-years" class="section level4">
<h4>Example 8: Get data for multiple inventory years</h4>
<details>
<summary>
View Example
</summary>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>dat8 <span class="ot">&lt;-</span> <span class="fu">DBgetPlots</span>(<span class="at">states =</span> <span class="st">&quot;Vermont&quot;</span>, </span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>                   <span class="at">eval =</span> <span class="st">&quot;custom&quot;</span>,</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>                   <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">invyrs =</span> <span class="dv">2012</span><span class="sc">:</span><span class="dv">2014</span>, </span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>                                            <span class="at">evalType =</span> <span class="st">&quot;ALL&quot;</span>))</span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="fu">names</span>(dat8)</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>tabs8 <span class="ot">&lt;-</span> dat8<span class="sc">$</span>tabs</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="fu">names</span>(tabs8)</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a>plt8 <span class="ot">&lt;-</span> tabs8<span class="sc">$</span>plt</span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="fu">table</span>(plt8<span class="sc">$</span>INVYR)</span></code></pre></div>
</details>
</div>
<div id="example-9-get-data-for-periodic-inventory" class="section level4">
<h4>Example 9: Get data for periodic inventory</h4>
<details>
<summary>
View Example
</summary>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>dat9 <span class="ot">&lt;-</span> <span class="fu">DBgetPlots</span>(<span class="at">states =</span> <span class="st">&quot;Wyoming&quot;</span>, </span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>                    <span class="at">invtype =</span> <span class="st">&quot;PERIODIC&quot;</span>,</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>                    <span class="at">eval =</span> <span class="st">&quot;FIA&quot;</span>,</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>                    <span class="at">eval_opts =</span> <span class="fu">list</span>(<span class="at">Cur =</span> <span class="cn">TRUE</span>, </span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>                                     <span class="at">evalType =</span> <span class="st">&quot;VOL&quot;</span>))</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="fu">names</span>(dat9)</span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a>tabs9 <span class="ot">&lt;-</span> dat9<span class="sc">$</span>tabs</span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="fu">names</span>(tabs9)</span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a>plt9 <span class="ot">&lt;-</span> tabs9<span class="sc">$</span>plt</span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a><span class="fu">table</span>(plt9<span class="sc">$</span>STATECD, plt9<span class="sc">$</span>INVYR)</span></code></pre></div>
</details>
</div>
<div id="example-10-intensity" class="section level4">
<h4>Example 10: Intensity</h4>
<details>
<summary>
View Example
</summary>
<p>The objective of this section is to understand the differences when
using INTENSITY=1.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="do">## With only P2 plots (intensity1 = TRUE)</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>dat10 <span class="ot">&lt;-</span> <span class="fu">DBgetPlots</span>(<span class="at">states =</span> <span class="st">&quot;Vermont&quot;</span>, </span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>                    <span class="at">eval =</span> <span class="st">&quot;FIA&quot;</span>,</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>                    <span class="at">eval_opts =</span> <span class="fu">list</span>(<span class="at">Cur =</span> <span class="cn">TRUE</span>, </span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>                                     <span class="at">Type =</span> <span class="st">&quot;ALL&quot;</span>),</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>                    <span class="at">intensity1 =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>                    <span class="at">issp =</span> <span class="cn">TRUE</span>)</span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>tabs10 <span class="ot">&lt;-</span> dat10<span class="sc">$</span>tabs</span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>plt10 <span class="ot">&lt;-</span> tabs10<span class="sc">$</span>plt</span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a></span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a><span class="fu">table</span>(plt10<span class="sc">$</span>INVYR)</span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a>spxy10 <span class="ot">&lt;-</span> dat10<span class="sc">$</span>xyCur_PUBLIC</span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a></span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a><span class="co"># Display spatial output of public coordinates</span></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a><span class="fu">plot</span>(sf<span class="sc">::</span><span class="fu">st_geometry</span>(spxy10), <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">cex =</span> .<span class="dv">5</span>)</span></code></pre></div>
</div>
</div>
<div id="dbgetstrata" class="section level3">
<h3><a name="DBgetStrata"></a><code>DBgetStrata()</code></h3>
<p>The <code>DBgetStrata</code> function queries the FIA database for
post-stratification information.</p>
<div id="example1-get-strata-for-the-most-current-evaluation-for-wyoming" class="section level4">
<h4>Example1: Get strata for the most current evaluation for
Wyoming</h4>
<details>
<summary>
View Example
</summary>
</div>
<div id="dbgetstrata-1" class="section level4">
<h4><a name="DBgetStrata"></a>DBgetStrata()</h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>strat1 <span class="ot">&lt;-</span> <span class="fu">DBgetStrata</span>(<span class="at">states =</span> <span class="st">&quot;Wyoming&quot;</span>, </span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>                      <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">Cur =</span> <span class="cn">TRUE</span>))</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="fu">names</span>(strat1)</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="do">## Look at plot assign data</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>pltassgn1 <span class="ot">&lt;-</span> strat1<span class="sc">$</span>pltassgn</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="fu">head</span>(pltassgn1)</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a><span class="fu">unique</span>(pltassgn1<span class="sc">$</span>EVALID)</span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a>strat1<span class="sc">$</span>evalid  </span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a><span class="do">## Look at area data for estimation unit</span></span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>strat1<span class="sc">$</span>unitarea</span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a>strat1<span class="sc">$</span>unitvar</span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a>strat1<span class="sc">$</span>unitvar2</span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a>strat1<span class="sc">$</span>areavar</span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a><span class="do">## Look at stratification data for estimation unit</span></span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a>strat1<span class="sc">$</span>stratalut</span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a>strat1<span class="sc">$</span>strvar</span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a>strat1<span class="sc">$</span>getwtvar</span></code></pre></div>
</details>
</div>
<div id="example-2-get-strata-information-for-a-specific-evaluation-for-wyoming" class="section level4">
<h4>Example 2: Get strata information for a specific evaluation for
Wyoming</h4>
<details>
<summary>
View Example
</summary>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>strat2 <span class="ot">&lt;-</span> <span class="fu">DBgetStrata</span>(<span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">evalid =</span> <span class="dv">561200</span>))</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="fu">unique</span>(strat2<span class="sc">$</span>pltassgn<span class="sc">$</span>EVALID)</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>strat2<span class="sc">$</span>evalid  </span></code></pre></div>
</details>
</div>
<div id="example-3-get-strata-information-for-wyoming-evaluation-ending-in-2014" class="section level4">
<h4>Example 3: Get strata information for Wyoming, evaluation ending in
2014</h4>
<details>
<summary>
View Example
</summary>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>strat3 <span class="ot">&lt;-</span> <span class="fu">DBgetStrata</span>(<span class="at">states =</span> <span class="st">&quot;Wyoming&quot;</span>,</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>                      <span class="at">eval_opts =</span> <span class="fu">eval_options</span>(<span class="at">Endyr =</span> <span class="dv">2014</span>))</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>                  </span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="fu">unique</span>(strat3<span class="sc">$</span>pltassgn<span class="sc">$</span>EVALID)</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>strat3<span class="sc">$</span>evalid  </span></code></pre></div>
</details>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
