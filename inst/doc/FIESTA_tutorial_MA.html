<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>FIESTA - Model-Assisted Estimators</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">FIESTA - Model-Assisted Estimators</h1>



<div id="model-assisted-ma-module-overview" class="section level2">
<h2>Model-Assisted (MA) module overview</h2>
<p><code>FIESTA</code>’s Model-Assisted (MA) module calculates
population estimates and their sampling errors by taking advantage of
available model-assisted survey estimators from the <code>mase</code> R
package (McConville, et al. 2018). These estimators can use a variety of
auxiliary data to build models and predict over a response variable of
interest, while using a bias-correction term so that the bias of the
model does not depend on model mis-specification.</p>
<p>Functions in <code>FIESTA</code> used for fitting model-assisted
estimators include the <code>modMAarea</code> function for area
estimates and <code>modMAtree</code> for tree estimates. The
<code>modMApop</code> function is used to get population data needed for
model-assisted estimation. Below is a description and table of contents
for the sections related to these functions:</p>
<table>
<colgroup>
<col width="18%" />
<col width="81%" />
</colgroup>
<thead>
<tr class="header">
<th>FUNCTION</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="#modMApop">modMApop</a></td>
<td>Creates population data for model-assisted estimation.</td>
</tr>
<tr class="even">
<td><a href="#modMAarea">modMAarea</a></td>
<td>Produces area level estimates through model-assisted
estimation.</td>
</tr>
<tr class="odd">
<td><a href="#modMAtree">modMAtree</a></td>
<td>Produces tree level estimates through model-assisted
estimation.</td>
</tr>
</tbody>
</table>
</div>
<div id="objective-of-tutorial" class="section level2">
<h2>Objective of tutorial</h2>
<p>The main objective of this tutorial is to demonstrate how to use
<code>FIESTA</code> for generating estimates using estimators from
<code>mase</code>. The model-assisted estimators can be used with FIA’s
standard state-level population data (i.e, Evaluation) from the FIA
database (FIADB) and also population data from a custom boundary.</p>
<p>The following examples are for generating estimates and estimated
variances using standard FIA Evaluation data from FIA’s National
database, with custom Estimation unit and Stratification information.
The examples use data from three inventory years of field measurements
in the state of Wyoming, from FIADB_1.7.2.00, last updated June 20,
2018, downloaded on June 25, 2018 and stored as internal data objects in
<code>FIESTA</code>.</p>
<!-- The Green-Book estimators can be used with FIA's standard state-level population data (i.e, Evaluation) from the FIA database (FIADB) and also population data from a custom boundary. The population data includes a set of FIA plot data and summarized auxiliary information for post-stratification, including a table of area by estimation unit within the population, and a table of strata proportions by estimation unit. This tutorial steps through several examples using FIESTA's Green Book module, for three different populations: (POP1) an FIA standard Evaluation, Wyoming 561301; (POP2) a custom boundary with one population, Bighorn National Forest; and (POP3) a custom boundary with sub-populations, Bighorn National Forest Districts. All examples can be used with any population, standard or custom. -->
</div>
<div id="example-data---wyoming-wy-inventory-years-2011-2012" class="section level2">
<h2>Example data - Wyoming (WY), Inventory Years 2011-2012</h2>
<details>
<summary>
View MA Example Data
</summary>
<table>
<colgroup>
<col width="12%" />
<col width="87%" />
</colgroup>
<thead>
<tr class="header">
<th>Data Frame</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>WYplt</td>
<td>WY plot-level data</td>
</tr>
<tr class="even">
<td>WYcond</td>
<td>WY condition-level data</td>
</tr>
<tr class="odd">
<td>WYtree</td>
<td>WY tree-level data</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col width="27%" />
<col width="72%" />
</colgroup>
<thead>
<tr class="header">
<th>External data</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>WYbighorn_adminbnd.shp</td>
<td>Polygon shapefile of WY Bighorn National Forest Administrative
boundary*</td>
</tr>
<tr class="even">
<td>WYbighorn_districtbnd.shp</td>
<td>Polygon shapefile of WY Bighorn National Forest District
boundaries**</td>
</tr>
<tr class="odd">
<td>WYbighorn_forest_nonforest_250m.tif</td>
<td>GeoTIFF raster of predicted forest/nonforest (1/0) for
stratification***</td>
</tr>
<tr class="even">
<td>WYbighorn_dem_250m.img</td>
<td>Erdas Imagine raster of elevation change, in meters****</td>
</tr>
</tbody>
</table>
<p>*USDA Forest Service, Automated Lands Program (ALP). 2018.
S_USA.AdministrativeForest (<a href="http://data.fs.usda.gov/geodata/edw" class="uri">http://data.fs.usda.gov/geodata/edw</a>). Description: An
area encompassing all the National Forest System lands administered by
an administrative unit. The area encompasses private lands, other
governmental agency lands, and may contain National Forest System lands
within the proclaimed boundaries of another administrative unit. All
National Forest System lands fall within one and only one Administrative
Forest Area.</p>
<p>**USDA Forest Service, Automated Lands Program (ALP). 2018.
S_USA.RangerDistrict (<a href="http://data.fs.usda.gov/geodata/edw" class="uri">http://data.fs.usda.gov/geodata/edw</a>). Description: A
depiction of the boundary that encompasses a Ranger District.</p>
<p>***Based on MODIS-based classified map resampled from 250m to 500m
resolution and reclassified from 3 to 2 classes: 1:forest; 2:nonforest.
Projected in Albers Conical Equal Area, Datum NAD27 (Ruefenacht et
al. 2008). Clipped to extent of WYbighorn_adminbnd.shp.</p>
<p>****USGS National Elevation Dataset (NED), resampled from 30m
resolution to 250m. Projected in Albers Conical Equal Area, Datum NAD27
(U.S. Geological Survey 2017). Clipped to boundary of
WYbighorn_adminbnd.shp.</p>
</details>
<div id="set-up" class="section level3">
<h3>Set up</h3>
<p>First, you’ll need to load the <code>FIESTA</code> library:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(FIESTA)</span></code></pre></div>
<p>Next, you’ll need to set up an “outfolder”. This is just a file path
to a folder where you’d like <code>FIESTA</code> to send your data
output. For our purposes in this vignette, we have saved our outfolder
file path as the <code>outfolder</code> object in a temporary directory.
We also set a few default options preferred for this vignette.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>outfolder <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span></code></pre></div>
</div>
<div id="get-data-for-examples" class="section level3">
<h3>Get data for examples</h3>
<details>
<summary>
View Getting Data
</summary>
<p>Now that we’ve loaded <code>FIESTA</code> and setup our outfolder, we
can retrieve the data needed to run the examples. First, we point to
some external data and predictor layers stored in <code>FIESTA</code>
and derive new predictor layers using the <code>terra</code>
package.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># File names for external spatial data</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>WYbhfn <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;sp_data/WYbighorn_adminbnd.shp&quot;</span>,</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>                      <span class="at">package =</span> <span class="st">&quot;FIESTA&quot;</span>)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>WYbhdistfn <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;sp_data/WYbighorn_districtbnd.shp&quot;</span>,</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>                          <span class="at">package =</span> <span class="st">&quot;FIESTA&quot;</span>)</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="do">## predictor variables</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>fornffn <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;sp_data/WYbighorn_forest_nonforest_250m.tif&quot;</span>,</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>                       <span class="at">package =</span> <span class="st">&quot;FIESTA&quot;</span>)</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>demfn <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;sp_data/WYbighorn_dem_250m.img&quot;</span>,</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>                     <span class="at">package =</span> <span class="st">&quot;FIESTA&quot;</span>)</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="co"># Derive new predictor layers from dem</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>dem <span class="ot">&lt;-</span> <span class="fu">rast</span>(demfn)</span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>slpfn <span class="ot">&lt;-</span> <span class="fu">paste0</span>(outfolder, <span class="st">&quot;/WYbh_slp.img&quot;</span>)</span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a>slp <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">terrain</span>(dem,</span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>                      <span class="at">v =</span> <span class="st">&quot;slope&quot;</span>,</span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a>                      <span class="at">unit =</span> <span class="st">&quot;degrees&quot;</span>,</span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>                      <span class="at">filename =</span> slpfn, </span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>                      <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a>                      <span class="at">NAflag =</span> <span class="sc">-</span><span class="fl">99999.0</span>)</span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a>aspfn <span class="ot">&lt;-</span> <span class="fu">paste0</span>(outfolder, <span class="st">&quot;/WYbh_asp.img&quot;</span>)</span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a>asp <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">terrain</span>(dem,</span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a>                      <span class="at">v =</span> <span class="st">&quot;aspect&quot;</span>,</span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a>                      <span class="at">unit =</span> <span class="st">&quot;degrees&quot;</span>, </span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a>                      <span class="at">filename =</span> aspfn,</span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a>                      <span class="at">overwrite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a>                      <span class="at">NAflag =</span> <span class="sc">-</span><span class="fl">99999.0</span>)</span></code></pre></div>
<p>Next, we can get our FIA plot data and set up our auxiliary data. We
can get our FIA plot data with the <code>spMakeSpatialPoints</code>
function from <code>FIESTA</code>. For more information on how to use
this function, please see the <code>sp</code> vignette included with
<code>FIESTA</code> (link).</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>WYspplt <span class="ot">&lt;-</span> <span class="fu">spMakeSpatialPoints</span>(</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="at">xyplt =</span> WYplt,</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="at">xy.uniqueid =</span> <span class="st">&quot;CN&quot;</span>,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="at">xvar =</span> <span class="st">&quot;LON_PUBLIC&quot;</span>,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>  <span class="at">yvar =</span> <span class="st">&quot;LAT_PUBLIC&quot;</span>,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>  <span class="at">xy.crs =</span> <span class="dv">4269</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>)</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>rastlst.cont <span class="ot">&lt;-</span> <span class="fu">c</span>(demfn, slpfn, aspfn)</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>rastlst.cont.name <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;dem&quot;</span>, <span class="st">&quot;slp&quot;</span>, <span class="st">&quot;asp&quot;</span>)</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>rastlst.cat <span class="ot">&lt;-</span> fornffn</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>rastlst.cat.name <span class="ot">&lt;-</span> <span class="st">&quot;fornf&quot;</span></span></code></pre></div>
<p>Next, we must generate dataset for model-assisted estimation. We can
do this with the <code>spGetAuxiliary</code> function from
<code>FIESTA</code>. Again, see the <code>sp</code> vignette for further
information on this function.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>modeldat <span class="ot">&lt;-</span> <span class="fu">spGetAuxiliary</span>(</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="at">xyplt =</span> WYspplt,</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="at">uniqueid =</span> <span class="st">&quot;CN&quot;</span>,</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="at">unit_layer =</span> WYbhfn,</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  <span class="at">unitvar =</span> <span class="cn">NULL</span>,</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>  <span class="at">rastlst.cont =</span> rastlst.cont,</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>  <span class="at">rastlst.cont.name =</span> rastlst.cont.name,</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>  <span class="at">rastlst.cat =</span> rastlst.cat,</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>  <span class="at">rastlst.cat.name =</span> rastlst.cat.name,</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>  <span class="at">rastlst.cont.stat =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>  <span class="at">asptransform =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>  <span class="at">rast.asp =</span> aspfn,</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>  <span class="at">keepNA =</span> <span class="cn">FALSE</span>,</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>  <span class="at">showext =</span> <span class="cn">FALSE</span>,</span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>  <span class="at">savedata =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">str</span>(modeldat, <span class="at">max.level =</span> <span class="dv">1</span>)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## List of 12
##  $ unitvar       : chr &quot;ONEUNIT&quot;
##  $ pltassgn      :&#39;data.frame&#39;:  56 obs. of  25 variables:
##  $ pltassgnid    : chr &quot;CN&quot;
##  $ unitarea      :&#39;data.frame&#39;:  1 obs. of  2 variables:
##  $ areavar       : chr &quot;ACRES_GIS&quot;
##  $ unitzonal     :&#39;data.frame&#39;:  1 obs. of  8 variables:
##  $ inputdf       :Classes &#39;data.table&#39; and &#39;data.frame&#39;: 4 obs. of  7 variables:
##   ..- attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt; 
##  $ prednames     : chr [1:5] &quot;dem&quot; &quot;slp&quot; &quot;asp_cos&quot; &quot;asp_sin&quot; ...
##  $ zonalnames    : chr [1:7] &quot;dem&quot; &quot;slp&quot; &quot;asp_cos&quot; &quot;asp_sin&quot; ...
##  $ predfac       : chr &quot;fornf&quot;
##  $ npixelvar     : chr &quot;npixels&quot;
##  $ predfac.levels:List of 1</code></pre>
</details>
</details>
</div>
</div>
<div id="examples" class="section level2">
<h2>Examples</h2>
<div id="modmapop" class="section level3">
<h3><code>modMApop</code></h3>
<div id="example-1-creating-our-population-dataset-with-modmapop" class="section level4">
<h4>Example 1: Creating our population dataset with
<code>modMApop</code></h4>
<details>
<summary>
View Example
</summary>
<p>We can create our population data for model-assisted estimation. To
do so, we use the <code>modMApop</code> function in <code>FIESTA</code>.
We must assign our population tables with the <code>popTabs</code>
argument (and unique identifiers for these tables with the
<code>popTabIDs</code> argument if they are not the default), the plot
assignment with the <code>pltassgn</code> argument, and in auxiliary
dataset we just created with the <code>auxdat</code> argument. The
<code>spGetAuxiliary</code> function has done much of the hard work for
us so far, so we can just run a simple call to
<code>modMApop</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>MApopdat <span class="ot">&lt;-</span> <span class="fu">modMApop</span>(<span class="at">popTabs =</span> <span class="fu">list</span>(<span class="at">tree =</span> WYtree, <span class="at">cond =</span> WYcond),</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>                     <span class="at">auxdat =</span> modeldat)</span></code></pre></div>
<p>Note that the <code>modMApop</code> function returns a list with lots
of information and data for us to use. For a quick look at what this
list includes we can use the <code>str</code> function:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">str</span>(MApopdat, <span class="at">max.level =</span> <span class="dv">1</span>)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## List of 26
##  $ module     : chr &quot;MA&quot;
##  $ popType    : chr &quot;VOL&quot;
##  $ condx      :Classes &#39;data.table&#39; and &#39;data.frame&#39;:    66 obs. of  17 variables:
##   ..- attr(*, &quot;sorted&quot;)= chr [1:2] &quot;PLT_CN&quot; &quot;CONDID&quot;
##   ..- attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt; 
##  $ pltcondx   :Classes &#39;data.table&#39; and &#39;data.frame&#39;:    66 obs. of  29 variables:
##   ..- attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt; 
##   ..- attr(*, &quot;sorted&quot;)= chr [1:2] &quot;PLT_CN&quot; &quot;CONDID&quot;
##  $ cuniqueid  : chr &quot;PLT_CN&quot;
##  $ condid     : chr &quot;CONDID&quot;
##  $ ACI.filter : chr &quot;COND_STATUS_CD == 1&quot;
##  $ unitarea   :Classes &#39;data.table&#39; and &#39;data.frame&#39;:    1 obs. of  2 variables:
##   ..- attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt; 
##   ..- attr(*, &quot;sorted&quot;)= chr &quot;ONEUNIT&quot;
##  $ areavar    : chr &quot;ACRES_GIS&quot;
##  $ areaunits  : chr &quot;acres&quot;
##  $ unitvar    : chr &quot;ONEUNIT&quot;
##  $ unitvars   : chr &quot;ONEUNIT&quot;
##  $ unitlut    :Classes &#39;data.table&#39; and &#39;data.frame&#39;:    1 obs. of  7 variables:
##   ..- attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt; 
##   ..- attr(*, &quot;sorted&quot;)= chr &quot;ONEUNIT&quot;
##  $ plotsampcnt:&#39;data.frame&#39;: 2 obs. of  3 variables:
##  $ condsampcnt:&#39;data.frame&#39;: 4 obs. of  3 variables:
##  $ npixels    :Classes &#39;data.table&#39; and &#39;data.frame&#39;:    1 obs. of  2 variables:
##   ..- attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt; 
##  $ npixelvar  : chr &quot;npixels&quot;
##  $ states     : chr &quot;Wyoming&quot;
##  $ invyrs     :List of 1
##  $ estvar.area: chr &quot;CONDPROP_ADJ&quot;
##  $ adj        : chr &quot;plot&quot;
##  $ treex      :Classes &#39;data.table&#39; and &#39;data.frame&#39;:    1691 obs. of  21 variables:
##   ..- attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt; 
##   ..- attr(*, &quot;sorted&quot;)= chr [1:2] &quot;PLT_CN&quot; &quot;CONDID&quot;
##  $ tuniqueid  : chr &quot;PLT_CN&quot;
##  $ adjtree    : logi FALSE
##  $ prednames  : chr [1:5] &quot;dem&quot; &quot;slp&quot; &quot;asp_cos&quot; &quot;asp_sin&quot; ...
##  $ predfac    : chr &quot;fornf&quot;</code></pre>
</details>
<p>Now that we’ve created our population dataset, we can move on to
estimation.</p>
</details>
</div>
</div>
<div id="modmaarea" class="section level3">
<h3><code>modMAarea</code></h3>
<div id="example-2-area-of-forest-land-wyoming-2011-2013" class="section level4">
<h4>Example 2: Area of forest land, Wyoming, 2011-2013</h4>
<details>
<summary>
View Example
</summary>
<p>In this example, we look at estimating the area of forest land in
Wyoming from 2011 to 2013 summed to the population unit
(<code>sumunit = TRUE</code>) with the generalized regression estimator
(<code>MAmethod = &quot;greg&quot;</code>). <code>FIESTA</code> returns raw data
for area of forest land, Wyoming, 2011-2013 (sum estimation units).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>area1 <span class="ot">&lt;-</span> <span class="fu">modMAarea</span>(</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="at">MApopdat =</span> MApopdat, <span class="co"># pop - population calculations for WY, post-stratification</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="at">MAmethod =</span> <span class="st">&quot;greg&quot;</span>, <span class="co"># est - model-assisted method</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  <span class="at">landarea =</span> <span class="st">&quot;FOREST&quot;</span> <span class="co"># est - forest land filter</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>  )</span></code></pre></div>
<p>We can look at the structure of this output with <code>str</code> and
the estimates below. Note that again <code>FIESTA</code> outputs a
list.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">str</span>(area1, <span class="at">max.level =</span> <span class="dv">2</span>)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## List of 4
##  $ est    :Classes &#39;data.table&#39; and &#39;data.frame&#39;:    1 obs. of  3 variables:
##   ..$ ONEUNIT               : num 1
##   ..$ Estimate              : num 660395
##   ..$ Percent Sampling Error: num 9.42
##   ..- attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt; 
##   ..- attr(*, &quot;sorted&quot;)= chr &quot;ONEUNIT&quot;
##  $ raw    :List of 9
##   ..$ unit_totest  :&#39;data.frame&#39;:    1 obs. of  18 variables:
##   ..$ domdat       :&#39;data.frame&#39;:    66 obs. of  19 variables:
##   ..$ module       : chr &quot;MA&quot;
##   ..$ esttype      : chr &quot;AREA&quot;
##   ..$ MAmethod     : chr &quot;greg&quot;
##   ..$ predselectlst:List of 1
##   ..$ rowvar       : chr &quot;TOTAL&quot;
##   ..$ colvar       : chr &quot;NONE&quot;
##   ..$ areaunits    : chr &quot;acres&quot;
##  $ statecd: int 56
##  $ invyr  : int [1:3] 2011 2012 2013</code></pre>
</details>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>area1<span class="sc">$</span>est</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##    ONEUNIT Estimate Percent Sampling Error
## 1:       1 660395.1                   9.42</code></pre>
</details>
</details>
</div>
<div id="example-3-area-of-forest-land-wyoming-2011-2013-using-the-elastic-net-for-variable-selection" class="section level4">
<h4>Example 3: Area of forest land, Wyoming, 2011-2013, using the
Elastic Net for variable selection</h4>
<details>
<summary>
View Example
</summary>
<p>Here, we fit the same model as the above example, but rather than
using <code>&quot;greg&quot;</code> are our model-assisted method, we can use
<code>&quot;gregEN&quot;</code> where the EN stands for “elastic net”. The elastic
net performs variable selection for us, grabbing predictors it finds to
be most useful in the model.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>area2 <span class="ot">&lt;-</span> <span class="fu">modMAarea</span>(</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>  <span class="at">MApopdat =</span> MApopdat, <span class="co"># pop - population calculations for WY, post-stratification</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  <span class="at">MAmethod =</span> <span class="st">&quot;gregEN&quot;</span>, <span class="co"># est - model-assisted method</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>  <span class="at">landarea =</span> <span class="st">&quot;FOREST&quot;</span>, <span class="co"># est - forest land filter</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>  )</span></code></pre></div>
<p>We can again see that the structure of the list is very similar to
that in the above example:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">str</span>(area2, <span class="at">max.level =</span> <span class="dv">2</span>)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## List of 4
##  $ est    :Classes &#39;data.table&#39; and &#39;data.frame&#39;:    1 obs. of  3 variables:
##   ..$ ONEUNIT               : num 1
##   ..$ Estimate              : num 669219
##   ..$ Percent Sampling Error: num 9.36
##   ..- attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt; 
##   ..- attr(*, &quot;sorted&quot;)= chr &quot;ONEUNIT&quot;
##  $ raw    :List of 9
##   ..$ unit_totest  :&#39;data.frame&#39;:    1 obs. of  18 variables:
##   ..$ domdat       :&#39;data.frame&#39;:    66 obs. of  19 variables:
##   ..$ module       : chr &quot;MA&quot;
##   ..$ esttype      : chr &quot;AREA&quot;
##   ..$ MAmethod     : chr &quot;gregEN&quot;
##   ..$ predselectlst:List of 1
##   ..$ rowvar       : chr &quot;TOTAL&quot;
##   ..$ colvar       : chr &quot;NONE&quot;
##   ..$ areaunits    : chr &quot;acres&quot;
##  $ statecd: int 56
##  $ invyr  : int [1:3] 2011 2012 2013</code></pre>
</details>
<p>However now the <code>raw</code> list has an item call
<code>predselectlst</code>. We can look at this item now:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>area2<span class="sc">$</span>raw<span class="sc">$</span>predselectlst<span class="sc">$</span>totest</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##    ONEUNIT TOTAL           dem         slp     asp_cos asp_sin     fornf2
## 1:       1     1 -0.0001558203 0.008902244 0.001901744       0 -0.3313874</code></pre>
</details>
<p>Notably, we can see that <code>dem</code>, <code>slp</code>,
<code>asp_cos</code>, and <code>asp_sin</code> were removed from the
model.</p>
</details>
</div>
<div id="example-4-area-by-forest-type-on-forest-land-wyoming-2011-2013" class="section level4">
<h4>Example 4: Area by forest type on forest land, Wyoming,
2011-2013</h4>
<details>
<summary>
View Example
</summary>
<p>In this example, we look at adding rows to the output and include
returntitle=TRUE to return title information.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>area3 <span class="ot">&lt;-</span> <span class="fu">modMAarea</span>(</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>    <span class="at">MApopdat =</span> MApopdat,         <span class="co"># pop - population calculations for WY, post-stratification</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>    <span class="at">MAmethod =</span> <span class="st">&quot;greg&quot;</span>,           <span class="co"># est - model-assisted method</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>    <span class="at">landarea =</span> <span class="st">&quot;FOREST&quot;</span>,         <span class="co"># est - forest land filter</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>    <span class="at">rowvar =</span> <span class="st">&quot;FORTYPCD&quot;</span>,         <span class="co"># est - row domain</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>    <span class="at">returntitle =</span> <span class="cn">TRUE</span>           <span class="co"># out - return title information</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>    )</span></code></pre></div>
<p>Again, we can look at the contents of the output list. The output now
includes titlelst, a list of associated titles.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">str</span>(area3, <span class="at">max.level =</span> <span class="dv">1</span>)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## List of 5
##  $ est     :&#39;data.frame&#39;:    8 obs. of  3 variables:
##  $ titlelst:List of 9
##  $ raw     :List of 10
##  $ statecd : int 56
##  $ invyr   : int [1:3] 2011 2012 2013</code></pre>
</details>
<p>And the estimates:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="do">## Estimate and percent sampling error of estimate</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>area3<span class="sc">$</span>est</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   Forest type Estimate Percent Sampling Error
## 1         201  42653.6                  60.56
## 2         265  47917.2                  67.78
## 3         266  71039.9                  43.05
## 4         268  39520.3                   68.8
## 5         281 407596.6                  16.05
## 6         901  24905.9                  78.03
## 7         999  26761.6                  63.54
## 8       Total 660395.1                   9.42</code></pre>
</details>
<p>Along with raw data and titles:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="do">## Raw data (list object) for estimate</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>raw3 <span class="ot">&lt;-</span> area3<span class="sc">$</span>raw      <span class="co"># extract raw data list object from output</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="fu">names</span>(raw3)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##  [1] &quot;unit_totest&quot;   &quot;unit_rowest&quot;   &quot;domdat&quot;        &quot;module&quot;       
##  [5] &quot;esttype&quot;       &quot;MAmethod&quot;      &quot;predselectlst&quot; &quot;rowvar&quot;       
##  [9] &quot;colvar&quot;        &quot;areaunits&quot;</code></pre>
</details>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">head</span>(raw3<span class="sc">$</span>unit_totest) <span class="co"># estimates by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   ONEUNIT      nhat    nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED      est
## 1       1 0.5936603 0.003129767     56         37   1112412  1112412 660395.1
##      est.var   est.se     est.cv      pse CI99left CI99right CI95left CI95right
## 1 3872964796 62233.15 0.09423624 9.423624 500093.1    820697 538420.4  782369.8
##   CI68left CI68right
## 1 598506.8  722283.3</code></pre>
</details>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>raw3<span class="sc">$</span>totest            <span class="co"># estimates for population (i.e., WY)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## NULL</code></pre>
</details>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">head</span>(raw3<span class="sc">$</span>unit_rowest) <span class="co"># estimates by row, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   ONEUNIT Forest type       nhat     nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS
## 1       1         201 0.03834336 0.0005392280     56          2   1112412
## 2       1         265 0.04307505 0.0008523855     56          4   1112412
## 3       1         266 0.06386110 0.0007557639     56          5   1112412
## 4       1         268 0.03552668 0.0005973938     56          3   1112412
## 5       1         281 0.36640782 0.0034566717     56         23   1112412
## 6       1         901 0.02238906 0.0003052203     56          1   1112412
##   AREAUSED       est    est.var   est.se    est.cv      pse CI99left CI99right
## 1  1112412  42653.63  667273775 25831.64 0.6056142 60.56142      0.0 109191.53
## 2  1112412  47917.21 1054793996 32477.59 0.6777855 67.77855      0.0 131573.95
## 3  1112412  71039.88  935228490 30581.51 0.4304836 43.04836      0.0 149812.62
## 4  1112412  39520.32  739251639 27189.18 0.6879799 68.79799      0.0 109555.01
## 5  1112412 407596.59 4277497216 65402.58 0.1604591 16.04591 239130.7 576062.46
## 6  1112412  24905.87  377698351 19434.46 0.7803167 78.03167      0.0  74965.72
##    CI95left CI95right   CI68left CI68right
## 1      0.00  93282.72  16965.145  68342.11
## 2      0.00 111572.13  15619.617  80214.81
## 3  11101.23 130978.53  40627.860 101451.90
## 4      0.00  92810.14  12481.820  66558.81
## 5 279409.89 535783.28 342556.478 472636.70
## 6      0.00  62996.71   5579.111  44232.62</code></pre>
</details>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="fu">head</span>(raw3<span class="sc">$</span>rowest)      <span class="co"># estimates by row for population (i.e., WY)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## NULL</code></pre>
</details>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="do">## Titles (list object) for estimate</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>titlelst3 <span class="ot">&lt;-</span> area3<span class="sc">$</span>titlelst</span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="fu">names</span>(titlelst3)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## [1] &quot;title.estpse&quot;  &quot;title.unitvar&quot; &quot;title.ref&quot;     &quot;outfn.estpse&quot; 
## [5] &quot;outfn.rawdat&quot;  &quot;outfn.param&quot;   &quot;title.rowvar&quot;  &quot;title.row&quot;    
## [9] &quot;title.unitsn&quot;</code></pre>
</details>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>titlelst3</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## $title.estpse
## [1] &quot;Area, in acres, and percent sampling error on forest land by forest type&quot;
## 
## $title.unitvar
## [1] &quot;ONEUNIT&quot;
## 
## $title.ref
## [1] &quot;, 2011-2013&quot;
## 
## $outfn.estpse
## [1] &quot;area_FORTYPCD_forestland&quot;
## 
## $outfn.rawdat
## [1] &quot;area_FORTYPCD_forestland_rawdata&quot;
## 
## $outfn.param
## [1] &quot;area_FORTYPCD_forestland_parameters&quot;
## 
## $title.rowvar
## [1] &quot;Forest type&quot;
## 
## $title.row
## [1] &quot;Area, in acres, on forest land by forest type; , 2011-2013&quot;
## 
## $title.unitsn
## [1] &quot;acres&quot;</code></pre>
</details>
</details>
</div>
<div id="example-5-area-by-forest-type-and-stand-size-class-on-forest-land-wyoming-2011-2013" class="section level4">
<h4>Example 5: Area by forest type and stand-size class on forest land,
Wyoming, 2011-2013</h4>
<details>
<summary>
View Example
</summary>
<p>In this example, we look at adding rows and columns to output,
including FIA names. We also output estimates and percent standard error
in the same cell with the <code>allin1</code> argument in
<code>table_options</code> and save data to an outfolder with the
<code>outfolder</code> argument in <code>savedata_options</code>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="do">## Area of forest land by forest type and stand-size class, Wyoming, 2011-2013</span></span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a>area4 <span class="ot">&lt;-</span> <span class="fu">modMAarea</span>(</span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a>    <span class="at">MApopdat =</span> MApopdat,         <span class="co"># pop - population calculations for WY, post-stratification</span></span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a>    <span class="at">MAmethod =</span> <span class="st">&quot;greg&quot;</span>,           <span class="co"># est - model-assisted method</span></span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a>    <span class="at">landarea =</span> <span class="st">&quot;FOREST&quot;</span>,         <span class="co"># est - forest land filter</span></span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a>    <span class="at">rowvar =</span> <span class="st">&quot;FORTYPCD&quot;</span>,         <span class="co"># est - row domain</span></span>
<span id="cb40-7"><a href="#cb40-7" tabindex="-1"></a>    <span class="at">colvar =</span> <span class="st">&quot;STDSZCD&quot;</span>,          <span class="co"># est - column domain</span></span>
<span id="cb40-8"><a href="#cb40-8" tabindex="-1"></a>    <span class="at">savedata =</span> <span class="cn">TRUE</span>,             <span class="co"># out - save data to outfolder</span></span>
<span id="cb40-9"><a href="#cb40-9" tabindex="-1"></a>    <span class="at">returntitle =</span> <span class="cn">TRUE</span>,          <span class="co"># out - return title information</span></span>
<span id="cb40-10"><a href="#cb40-10" tabindex="-1"></a>    <span class="at">table_opts =</span> <span class="fu">list</span>(</span>
<span id="cb40-11"><a href="#cb40-11" tabindex="-1"></a>      <span class="at">row.FIAname =</span> <span class="cn">TRUE</span>,          <span class="co"># table - row domain names</span></span>
<span id="cb40-12"><a href="#cb40-12" tabindex="-1"></a>      <span class="at">col.FIAname =</span> <span class="cn">TRUE</span>,          <span class="co"># table - column domain names</span></span>
<span id="cb40-13"><a href="#cb40-13" tabindex="-1"></a>      <span class="at">allin1 =</span> <span class="cn">TRUE</span>                <span class="co"># table - return output with est(pse)</span></span>
<span id="cb40-14"><a href="#cb40-14" tabindex="-1"></a>      ),</span>
<span id="cb40-15"><a href="#cb40-15" tabindex="-1"></a>    <span class="at">savedata_opts =</span> <span class="fu">list</span>(</span>
<span id="cb40-16"><a href="#cb40-16" tabindex="-1"></a>      <span class="at">outfolder =</span> outfolder,       <span class="co"># save - outfolder for saving data</span></span>
<span id="cb40-17"><a href="#cb40-17" tabindex="-1"></a>      <span class="at">outfn.pre =</span> <span class="st">&quot;WY&quot;</span>             <span class="co"># save - prefix for output files</span></span>
<span id="cb40-18"><a href="#cb40-18" tabindex="-1"></a>      )</span>
<span id="cb40-19"><a href="#cb40-19" tabindex="-1"></a>    )</span>
<span id="cb40-20"><a href="#cb40-20" tabindex="-1"></a></span>
<span id="cb40-21"><a href="#cb40-21" tabindex="-1"></a>area4<span class="sc">$</span>est</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##                         Forest type     Large diameter    Medium diameter
## 1:                      Douglas-fir  23,330.7 ( 79.00)        -- (    --)
## 2:                 Engelmann spruce  36,892.1 ( 74.16)  11,025.2 (175.15)
## 3: Engelmann spruce / subalpine fir  40,287.9 ( 68.99)  14,443.2 ( 66.30)
## 4:                    Subalpine fir  26,255.3 ( 75.29)        -- (    --)
## 5:                   Lodgepole pine 140,798.2 ( 33.20) 230,288.3 ( 20.42)
## 6:                            Aspen        -- (    --)        -- (    --)
## 7:                       Nonstocked        -- (    --)        -- (    --)
## 8:                            Total 267,564.1 ( 21.17) 255,756.7 ( 19.38)
##        Small diameter        Nonstocked              Total
## 1:  19,322.9 ( 99.12)       -- (    --)  42,653.6 ( 60.56)
## 2:        -- (    --)       -- (    --)  47,917.2 ( 67.78)
## 3:  16,308.7 ( 71.46)       -- (    --)  71,039.9 ( 43.05)
## 4:  13,265.0 (141.72)       -- (    --)  39,520.3 ( 68.80)
## 5:  36,510.1 ( 74.46)       -- (    --) 407,596.6 ( 16.05)
## 6:  24,905.9 ( 78.03)       -- (    --)  24,905.9 ( 78.03)
## 7:        -- (    --) 26,761.6 ( 63.54)  26,761.6 ( 63.54)
## 8: 110,312.6 ( 37.41) 26,761.6 ( 63.54) 660,395.1 (  9.42)</code></pre>
</details>
<p>We can again look at the output list, estimates, raw data, and
titles:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="do">## Look at output list</span></span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a><span class="fu">names</span>(area4)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## [1] &quot;est&quot;      &quot;pse&quot;      &quot;titlelst&quot; &quot;raw&quot;      &quot;statecd&quot;  &quot;invyr&quot;</code></pre>
</details>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="do">## Estimate and percent sampling error of estimate</span></span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="fu">head</span>(area4<span class="sc">$</span>est)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##                         Forest type     Large diameter    Medium diameter
## 1:                      Douglas-fir  23,330.7 ( 79.00)        -- (    --)
## 2:                 Engelmann spruce  36,892.1 ( 74.16)  11,025.2 (175.15)
## 3: Engelmann spruce / subalpine fir  40,287.9 ( 68.99)  14,443.2 ( 66.30)
## 4:                    Subalpine fir  26,255.3 ( 75.29)        -- (    --)
## 5:                   Lodgepole pine 140,798.2 ( 33.20) 230,288.3 ( 20.42)
## 6:                            Aspen        -- (    --)        -- (    --)
##       Small diameter  Nonstocked              Total
## 1: 19,322.9 ( 99.12) -- (    --)  42,653.6 ( 60.56)
## 2:       -- (    --) -- (    --)  47,917.2 ( 67.78)
## 3: 16,308.7 ( 71.46) -- (    --)  71,039.9 ( 43.05)
## 4: 13,265.0 (141.72) -- (    --)  39,520.3 ( 68.80)
## 5: 36,510.1 ( 74.46) -- (    --) 407,596.6 ( 16.05)
## 6: 24,905.9 ( 78.03) -- (    --)  24,905.9 ( 78.03)</code></pre>
</details>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="do">## Raw data (list object) for estimate</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a>raw4 <span class="ot">&lt;-</span> area4<span class="sc">$</span>raw      <span class="co"># extract raw data list object from output</span></span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a><span class="fu">names</span>(raw4)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##  [1] &quot;unit_totest&quot;   &quot;unit_rowest&quot;   &quot;unit_colest&quot;   &quot;unit_grpest&quot;  
##  [5] &quot;domdat&quot;        &quot;module&quot;        &quot;esttype&quot;       &quot;MAmethod&quot;     
##  [9] &quot;predselectlst&quot; &quot;rowvar&quot;        &quot;colvar&quot;        &quot;areaunits&quot;</code></pre>
</details>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>unit_totest) <span class="co"># estimates by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   ONEUNIT      nhat    nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED      est
## 1       1 0.5936603 0.003129767     56         37   1112412  1112412 660395.1
##      est.var   est.se     est.cv      pse CI99left CI99right CI95left CI95right
## 1 3872964796 62233.15 0.09423624 9.423624 500093.1    820697 538420.4  782369.8
##   CI68left CI68right
## 1 598506.8  722283.3</code></pre>
</details>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>totest)      <span class="co"># estimates for population (i.e., WY)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## NULL</code></pre>
</details>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>unit_rowest) <span class="co"># estimates by row, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   ONEUNIT                      Forest type       nhat     nhat.var NBRPLT
## 1       1                      Douglas-fir 0.03834336 0.0005392280     56
## 2       1                 Engelmann spruce 0.04307505 0.0008523855     56
## 3       1 Engelmann spruce / subalpine fir 0.06386110 0.0007557639     56
## 4       1                    Subalpine fir 0.03552668 0.0005973938     56
## 5       1                   Lodgepole pine 0.36640782 0.0034566717     56
## 6       1                            Aspen 0.02238906 0.0003052203     56
##   NBRPLT.gt0 FORTYPCD ACRES_GIS AREAUSED       est    est.var   est.se
## 1          2      201   1112412  1112412  42653.63  667273775 25831.64
## 2          4      265   1112412  1112412  47917.21 1054793996 32477.59
## 3          5      266   1112412  1112412  71039.88  935228490 30581.51
## 4          3      268   1112412  1112412  39520.32  739251639 27189.18
## 5         23      281   1112412  1112412 407596.59 4277497216 65402.58
## 6          1      901   1112412  1112412  24905.87  377698351 19434.46
##      est.cv      pse CI99left CI99right  CI95left CI95right   CI68left
## 1 0.6056142 60.56142      0.0 109191.53      0.00  93282.72  16965.145
## 2 0.6777855 67.77855      0.0 131573.95      0.00 111572.13  15619.617
## 3 0.4304836 43.04836      0.0 149812.62  11101.23 130978.53  40627.860
## 4 0.6879799 68.79799      0.0 109555.01      0.00  92810.14  12481.820
## 5 0.1604591 16.04591 239130.7 576062.46 279409.89 535783.28 342556.478
## 6 0.7803167 78.03167      0.0  74965.72      0.00  62996.71   5579.111
##   CI68right
## 1  68342.11
## 2  80214.81
## 3 101451.90
## 4  66558.81
## 5 472636.70
## 6  44232.62</code></pre>
</details>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>rowest)      <span class="co"># estimates by row for population (i.e., WY)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## NULL</code></pre>
</details>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>unit_colest) <span class="co"># estimates by column, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   ONEUNIT Stand-size class       nhat     nhat.var NBRPLT NBRPLT.gt0 STDSZCD
## 1       1   Large diameter 0.24052605 0.0025935705     56         18       1
## 2       1  Medium diameter 0.22991178 0.0019845421     56         14       2
## 3       1   Small diameter 0.09916524 0.0013761149     56          6       3
## 4       1       Nonstocked 0.02405726 0.0002336838     56          1       5
##   ACRES_GIS AREAUSED       est    est.var   est.se    est.cv      pse  CI99left
## 1   1112412  1112412 267564.15 3209443017 56651.95 0.2117322 21.17322 121638.40
## 2   1112412  1112412 255756.70 2455793975 49555.97 0.1937621 19.37621 128108.99
## 3   1112412  1112412 110312.64 1702888801 41266.07 0.3740829 37.40829   4018.28
## 4   1112412  1112412  26761.59  289174599 17005.13 0.6354306 63.54306      0.00
##   CI99right  CI95left CI95right   CI68left CI68right
## 1 413489.89 156528.37 378599.92 211226.172 323902.12
## 2 383404.42 158628.79 352884.62 206475.381 305038.03
## 3 216607.00  29432.62 191192.66  69275.269 151350.01
## 4  70563.91      0.00  60091.04   9850.701  43672.48</code></pre>
</details>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>colest)      <span class="co"># estimates by column for population (i.e., WY)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## NULL</code></pre>
</details>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>unit_grpest) <span class="co"># estimates by row and column, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   ONEUNIT                                           grpvar        nhat
## 1       1                       Douglas-fir#Large diameter 0.020973074
## 2       1                       Douglas-fir#Small diameter 0.017370285
## 3       1                  Engelmann spruce#Large diameter 0.033164010
## 4       1                 Engelmann spruce#Medium diameter 0.009911038
## 5       1  Engelmann spruce / subalpine fir#Large diameter 0.036216716
## 6       1 Engelmann spruce / subalpine fir#Medium diameter 0.012983698
##       nhat.var NBRPLT NBRPLT.gt0                      Forest type
## 1 2.745298e-04     56          1                      Douglas-fir
## 2 2.964436e-04     56          1                      Douglas-fir
## 3 6.048455e-04     56          3                 Engelmann spruce
## 4 3.013453e-04     56          1                 Engelmann spruce
## 5 6.243626e-04     56          3 Engelmann spruce / subalpine fir
## 6 7.410764e-05     56          1 Engelmann spruce / subalpine fir
##   Stand-size class STDSZCD FORTYPCD ACRES_GIS AREAUSED      est   est.var
## 1   Large diameter       1      201   1112412  1112412 23330.71 339719955
## 2   Small diameter       3      201   1112412  1112412 19322.92 366837446
## 3   Large diameter       1      265   1112412  1112412 36892.05 748472910
## 4  Medium diameter       2      265   1112412  1112412 11025.16 372903083
## 5   Large diameter       1      266   1112412  1112412 40287.92 772624533
## 6  Medium diameter       2      266   1112412  1112412 14443.23  91705337
##     est.se    est.cv       pse CI99left CI99right CI95left CI95right   CI68left
## 1 18431.49 0.7900101  79.00101        0  70807.09        0  59455.77  5001.3621
## 2 19153.00 0.9912064  99.12064        0  68657.78        0  56862.11   276.0668
## 3 27358.23 0.7415752  74.15752        0 107362.19        0  90513.21  9685.4439
## 4 19310.70 1.7515118 175.15118        0  60766.22        0  48873.43     0.0000
## 5 27796.12 0.6899369  68.99369        0 111885.99        0  94767.33 12645.8475
## 6  9576.29 0.6630299  66.30299        0  39110.12        0  33212.41  4920.0086
##   CI68right
## 1  41660.05
## 2  38369.77
## 3  64098.66
## 4  30228.84
## 5  67930.00
## 6  23966.44</code></pre>
</details>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>grpest)      <span class="co"># estimates by row and column for population (i.e., WY)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## NULL</code></pre>
</details>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a><span class="do">## Titles (list object) for estimate</span></span>
<span id="cb64-2"><a href="#cb64-2" tabindex="-1"></a>titlelst4 <span class="ot">&lt;-</span> area4<span class="sc">$</span>titlelst</span>
<span id="cb64-3"><a href="#cb64-3" tabindex="-1"></a><span class="fu">names</span>(titlelst4)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##  [1] &quot;title.estpse&quot;  &quot;title.unitvar&quot; &quot;title.ref&quot;     &quot;outfn.estpse&quot; 
##  [5] &quot;outfn.rawdat&quot;  &quot;outfn.param&quot;   &quot;title.rowvar&quot;  &quot;title.row&quot;    
##  [9] &quot;title.colvar&quot;  &quot;title.col&quot;     &quot;title.unitsn&quot;</code></pre>
</details>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a>titlelst4</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## $title.estpse
## [1] &quot;Area, in acres (percent sampling error), by forest type and stand-size class on forest land&quot;
## 
## $title.unitvar
## [1] &quot;ONEUNIT&quot;
## 
## $title.ref
## [1] &quot;, 2011-2013&quot;
## 
## $outfn.estpse
## [1] &quot;WY_area_FORTYPNM_STDSZNM_forestland&quot;
## 
## $outfn.rawdat
## [1] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata&quot;
## 
## $outfn.param
## [1] &quot;WY_area_FORTYPNM_STDSZNM_forestland_parameters&quot;
## 
## $title.rowvar
## [1] &quot;Forest type&quot;
## 
## $title.row
## [1] &quot;Area, in acres (percent sampling error), by forest type on forest land; , 2011-2013&quot;
## 
## $title.colvar
## [1] &quot;Stand-size class&quot;
## 
## $title.col
## [1] &quot;Area, in acres (percent sampling error), by stand-size class on forest land; , 2011-2013&quot;
## 
## $title.unitsn
## [1] &quot;acres&quot;</code></pre>
</details>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a><span class="do">## List output files in outfolder</span></span>
<span id="cb68-2"><a href="#cb68-2" tabindex="-1"></a><span class="fu">list.files</span>(outfolder, <span class="at">pattern =</span> <span class="st">&quot;WY_area&quot;</span>)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## [1] &quot;WY_area_FORTYPNM_STDSZNM_forestland.csv&quot;                
## [2] &quot;WY_area_FORTYPNM_STDSZNM_forestland_modMA_mase_greg.csv&quot;</code></pre>
</details>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="fu">paste0</span>(outfolder, <span class="st">&quot;/rawdata&quot;</span>), <span class="at">pattern =</span> <span class="st">&quot;WY_area&quot;</span>)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##  [1] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata_colest.csv&quot;                     
##  [2] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata_domdat.csv&quot;                     
##  [3] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata_grpest.csv&quot;                     
##  [4] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_domdat.csv&quot;     
##  [5] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_colest.csv&quot;
##  [6] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_grpest.csv&quot;
##  [7] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_rowest.csv&quot;
##  [8] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_totest.csv&quot;
##  [9] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata_rowest.csv&quot;                     
## [10] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata_totest.csv&quot;                     
## [11] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata_unit_colest.csv&quot;                
## [12] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata_unit_grpest.csv&quot;                
## [13] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata_unit_rowest.csv&quot;                
## [14] &quot;WY_area_FORTYPNM_STDSZNM_forestland_rawdata_unit_totest.csv&quot;</code></pre>
</details>
</details>
</div>
</div>
<div id="modmatree" class="section level3">
<h3><code>modMAtree</code></h3>
<p>We will set our estimate variable and filter now. We set
<code>estvar</code> to <code>&quot;VOLCFNET&quot;</code> for net cubic foot
volume, and filter with <code>estvar.filter</code> set to
<code>&quot;STATUSCD == 1&quot;</code> so we only consider live trees in our
estimation.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a>estvar <span class="ot">&lt;-</span> <span class="st">&quot;VOLCFNET&quot;</span></span>
<span id="cb72-2"><a href="#cb72-2" tabindex="-1"></a>live_trees <span class="ot">&lt;-</span> <span class="st">&quot;STATUSCD == 1&quot;</span></span></code></pre></div>
<div id="example-6-net-cubic-foot-volume-of-live-trees-wyoming-2011-2013" class="section level4">
<h4>Example 6: Net cubic-foot volume of live trees, Wyoming,
2011-2013</h4>
<details>
<summary>
View Example
</summary>
<p>We now will generate estimates by estimation unit (i.e., ESTN_UNIT)
and sum to population (i.e., WY) with <code>modMAtree</code>.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" tabindex="-1"></a><span class="do">## Return raw data and titles</span></span>
<span id="cb73-2"><a href="#cb73-2" tabindex="-1"></a><span class="do">## Total net cubic-foot volume of live trees (at least 5 inches diameter), Wyoming, 2011-2013 </span></span>
<span id="cb73-3"><a href="#cb73-3" tabindex="-1"></a>tree1 <span class="ot">&lt;-</span> <span class="fu">modMAtree</span>(</span>
<span id="cb73-4"><a href="#cb73-4" tabindex="-1"></a>    <span class="at">MApopdat =</span> MApopdat,         <span class="co"># pop - population calculations</span></span>
<span id="cb73-5"><a href="#cb73-5" tabindex="-1"></a>    <span class="at">MAmethod =</span> <span class="st">&quot;greg&quot;</span>,           <span class="co"># est - model-assisted method</span></span>
<span id="cb73-6"><a href="#cb73-6" tabindex="-1"></a>    <span class="at">landarea =</span> <span class="st">&quot;FOREST&quot;</span>,         <span class="co"># est - forest land filter</span></span>
<span id="cb73-7"><a href="#cb73-7" tabindex="-1"></a>    <span class="at">estvar =</span> estvar,             <span class="co"># est - net cubic-foot volume</span></span>
<span id="cb73-8"><a href="#cb73-8" tabindex="-1"></a>    <span class="at">estvar.filter =</span> live_trees,  <span class="co"># est - live trees only</span></span>
<span id="cb73-9"><a href="#cb73-9" tabindex="-1"></a>    <span class="at">returntitle =</span> <span class="cn">TRUE</span>           <span class="co"># out - return title information</span></span>
<span id="cb73-10"><a href="#cb73-10" tabindex="-1"></a>    )</span>
<span id="cb73-11"><a href="#cb73-11" tabindex="-1"></a></span>
<span id="cb73-12"><a href="#cb73-12" tabindex="-1"></a><span class="fu">names</span>(tree1)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## [1] &quot;est&quot;      &quot;titlelst&quot; &quot;raw&quot;      &quot;statecd&quot;  &quot;invyr&quot;</code></pre>
</details>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" tabindex="-1"></a>tree1<span class="sc">$</span>raw<span class="sc">$</span>unit_totest</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   ONEUNIT     nhat nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED        est
## 1       1 1026.215 23835.98     56         34   1112412  1112412 1141574550
##       est.var    est.se    est.cv      pse  CI99left  CI99right  CI95left
## 1 2.94961e+16 171744283 0.1504451 15.04451 699190593 1583958507 804961940
##    CI95right  CI68left  CI68right
## 1 1478187159 970782094 1312367006</code></pre>
</details>
</details>
</div>
<div id="example-7-net-cubic-foot-volume-of-live-trees-wyoming-2011-2013-using-the-elastic-net-for-variable-selection" class="section level4">
<h4>Example 7: Net cubic-foot volume of live trees, Wyoming, 2011-2013,
using the Elastic Net for variable selection</h4>
<details>
<summary>
View Example
</summary>
<p>Here, we fit the same model as the above example, but rather than
using <code>&quot;greg&quot;</code> are our model-assisted method, we can use
<code>&quot;gregEN&quot;</code> where the EN stands for “elastic net”. The elastic
net performs variable selection for us, grabbing predictors it finds to
be most useful in the model.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" tabindex="-1"></a><span class="do">## Return raw data and titles</span></span>
<span id="cb77-2"><a href="#cb77-2" tabindex="-1"></a><span class="do">## Total net cubic-foot volume of live trees (at least 5 inches diameter), Wyoming, 2011-2013 </span></span>
<span id="cb77-3"><a href="#cb77-3" tabindex="-1"></a>tree2 <span class="ot">&lt;-</span> <span class="fu">modMAtree</span>(</span>
<span id="cb77-4"><a href="#cb77-4" tabindex="-1"></a>    <span class="at">MApopdat =</span> MApopdat,         <span class="co"># pop - population calculations</span></span>
<span id="cb77-5"><a href="#cb77-5" tabindex="-1"></a>    <span class="at">MAmethod =</span> <span class="st">&quot;gregEN&quot;</span>,         <span class="co"># est - model-assisted method</span></span>
<span id="cb77-6"><a href="#cb77-6" tabindex="-1"></a>    <span class="at">landarea =</span> <span class="st">&quot;FOREST&quot;</span>,         <span class="co"># est - forest land filter</span></span>
<span id="cb77-7"><a href="#cb77-7" tabindex="-1"></a>    <span class="at">estvar =</span> estvar,             <span class="co"># est - net cubic-foot volume</span></span>
<span id="cb77-8"><a href="#cb77-8" tabindex="-1"></a>    <span class="at">estvar.filter =</span> live_trees,  <span class="co"># est - live trees only</span></span>
<span id="cb77-9"><a href="#cb77-9" tabindex="-1"></a>    <span class="at">returntitle =</span> <span class="cn">TRUE</span>           <span class="co"># out - return title information</span></span>
<span id="cb77-10"><a href="#cb77-10" tabindex="-1"></a>    )</span></code></pre></div>
<p>We can again see that the structure of the list is very similar to
that in the above example:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" tabindex="-1"></a><span class="fu">str</span>(tree2, <span class="at">max.level =</span> <span class="dv">2</span>)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## List of 5
##  $ est     :Classes &#39;data.table&#39; and &#39;data.frame&#39;:   1 obs. of  3 variables:
##   ..$ ONEUNIT               : num 1
##   ..$ Estimate              : num 1.16e+09
##   ..$ Percent Sampling Error: num 14.9
##   ..- attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt; 
##   ..- attr(*, &quot;sorted&quot;)= chr &quot;ONEUNIT&quot;
##  $ titlelst:List of 10
##   ..$ title.estpse : chr &quot;Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia), in cubic feet, and perce&quot;| __truncated__
##   ..$ title.yvar   : chr &quot;Net volume, in cubic feet&quot;
##   ..$ title.estvar : chr &quot;Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia)&quot;
##   ..$ title.unitvar: chr &quot;ONEUNIT&quot;
##   ..$ title.ref    : chr &quot;Wyoming, 2011-2013&quot;
##   ..$ outfn.estpse : chr &quot;tree_VOLCFNET_forestland&quot;
##   ..$ outfn.rawdat : chr &quot;tree_VOLCFNET_forestland_rawdata&quot;
##   ..$ outfn.param  : chr &quot;tree_VOLCFNET_forestland_parameters&quot;
##   ..$ title.tot    : chr &quot;Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia), in cubic feet, on forest&quot;| __truncated__
##   ..$ title.unitsn : chr &quot;cubic feet&quot;
##  $ raw     :List of 13
##   ..$ unit_totest  :&#39;data.frame&#39;:    1 obs. of  18 variables:
##   ..$ domdat       :&#39;data.frame&#39;:    66 obs. of  19 variables:
##   ..$ plotweights  :List of 1
##   ..$ estvar       : chr &quot;VOLCFNET&quot;
##   ..$ estvar.filter: chr &quot;STATUSCD == 1&quot;
##   ..$ module       : chr &quot;MA&quot;
##   ..$ esttype      : chr &quot;TREE&quot;
##   ..$ MAmethod     : chr &quot;gregEN&quot;
##   ..$ predselectlst:List of 1
##   ..$ rowvar       : chr &quot;TOTAL&quot;
##   ..$ colvar       : chr &quot;NONE&quot;
##   ..$ areaunits    : chr &quot;acres&quot;
##   ..$ estunits     : num 1
##  $ statecd : int 56
##  $ invyr   : int [1:3] 2011 2012 2013</code></pre>
</details>
<p>However now the <code>raw</code> list has an item call
<code>predselectlst</code>. We can look at this item now:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" tabindex="-1"></a>tree2<span class="sc">$</span>raw<span class="sc">$</span>predselectlst</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## $totest
##    ONEUNIT TOTAL      dem       slp  asp_cos   asp_sin    fornf2
## 1:       1     1 0.535073 -55.87839 27.81163 -473.1724 -1186.413</code></pre>
</details>
<p>Notably, we can see that [INSERT CORRECT PREDS] <code>dem</code>,
<code>slp</code>, <code>asp_cos</code>, and <code>asp_sin</code> were
removed from the model.</p>
</details>
</div>
<div id="example-8-net-cubic-foot-volume-of-live-trees-by-forest-type-wyoming-2011-2013" class="section level4">
<h4>Example 8: Net cubic-foot volume of live trees by forest type,
Wyoming, 2011-2013</h4>
<details>
<summary>
View Example
</summary>
<p>This example adds rows to the output for net cubic-foot volume of
live trees (at least 5 inches diameter) by forest type, Wyoming,
2011-2013. We also choose to return titles with
<code>returntitle = TRUE</code>.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" tabindex="-1"></a>tree3 <span class="ot">&lt;-</span> <span class="fu">modMAtree</span>(</span>
<span id="cb82-2"><a href="#cb82-2" tabindex="-1"></a>    <span class="at">MApopdat =</span> MApopdat,         <span class="co"># pop - population calculations</span></span>
<span id="cb82-3"><a href="#cb82-3" tabindex="-1"></a>    <span class="at">MAmethod =</span> <span class="st">&quot;greg&quot;</span>,           <span class="co"># est - model-assisted method</span></span>
<span id="cb82-4"><a href="#cb82-4" tabindex="-1"></a>    <span class="at">landarea =</span> <span class="st">&quot;FOREST&quot;</span>,         <span class="co"># est - forest land filter</span></span>
<span id="cb82-5"><a href="#cb82-5" tabindex="-1"></a>    <span class="at">estvar =</span> <span class="st">&quot;VOLCFNET&quot;</span>,               <span class="co"># est - net cubic-foot volume</span></span>
<span id="cb82-6"><a href="#cb82-6" tabindex="-1"></a>    <span class="at">estvar.filter =</span> <span class="st">&quot;STATUSCD == 1&quot;</span>,   <span class="co"># est - live trees only</span></span>
<span id="cb82-7"><a href="#cb82-7" tabindex="-1"></a>    <span class="at">rowvar =</span> <span class="st">&quot;FORTYPCD&quot;</span>,         <span class="co"># est - row domain </span></span>
<span id="cb82-8"><a href="#cb82-8" tabindex="-1"></a>    <span class="at">returntitle =</span> <span class="cn">TRUE</span>           <span class="co"># out - return title information</span></span>
<span id="cb82-9"><a href="#cb82-9" tabindex="-1"></a>    )</span></code></pre></div>
<p>Again, we investigate the output of the returned list:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" tabindex="-1"></a><span class="do">## Look at output list</span></span>
<span id="cb83-2"><a href="#cb83-2" tabindex="-1"></a><span class="fu">names</span>(tree3)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## [1] &quot;est&quot;      &quot;titlelst&quot; &quot;raw&quot;      &quot;statecd&quot;  &quot;invyr&quot;</code></pre>
</details>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" tabindex="-1"></a><span class="do">## Estimate and percent sampling error of estimate</span></span>
<span id="cb85-2"><a href="#cb85-2" tabindex="-1"></a>tree3<span class="sc">$</span>est</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   Forest type     Estimate Percent Sampling Error
## 1         201   15435672.3                  63.81
## 2         265  171222876.3                  70.59
## 3         266  118655149.3                  66.72
## 4         268   43001324.8                  72.97
## 5         281  793259527.2                  19.62
## 6         901           --                     --
## 7         999           --                     --
## 8       Total 1141574549.9                  15.04</code></pre>
</details>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" tabindex="-1"></a><span class="do">## Raw data (list object) for estimate</span></span>
<span id="cb87-2"><a href="#cb87-2" tabindex="-1"></a>raw3 <span class="ot">&lt;-</span> tree3<span class="sc">$</span>raw      <span class="co"># extract raw data list object from output</span></span>
<span id="cb87-3"><a href="#cb87-3" tabindex="-1"></a><span class="fu">names</span>(raw3)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##  [1] &quot;unit_totest&quot;   &quot;unit_rowest&quot;   &quot;domdat&quot;        &quot;plotweights&quot;  
##  [5] &quot;estvar&quot;        &quot;estvar.filter&quot; &quot;module&quot;        &quot;esttype&quot;      
##  [9] &quot;MAmethod&quot;      &quot;predselectlst&quot; &quot;rowvar&quot;        &quot;colvar&quot;       
## [13] &quot;areaunits&quot;     &quot;estunits&quot;</code></pre>
</details>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" tabindex="-1"></a><span class="fu">head</span>(raw3<span class="sc">$</span>unit_totest)   <span class="co"># estimates by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   ONEUNIT     nhat nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED        est
## 1       1 1026.215 23835.98     56         34   1112412  1112412 1141574550
##       est.var    est.se    est.cv      pse  CI99left  CI99right  CI95left
## 1 2.94961e+16 171744283 0.1504451 15.04451 699190593 1583958507 804961940
##    CI95right  CI68left  CI68right
## 1 1478187159 970782094 1312367006</code></pre>
</details>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" tabindex="-1"></a><span class="fu">head</span>(raw3<span class="sc">$</span>totest)        <span class="co"># estimates for population (i.e., WY)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## NULL</code></pre>
</details>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" tabindex="-1"></a><span class="fu">head</span>(raw3<span class="sc">$</span>unit_rowest)   <span class="co"># estimates by row, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   ONEUNIT Forest type      nhat    nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS
## 1       1         201  13.87585    78.39277     56          2   1112412
## 2       1         265 153.92033 11805.74969     56          4   1112412
## 3       1         266 106.66472  5065.31148     56          5   1112412
## 4       1         268  38.65592   795.74932     56          2   1112412
## 5       1         281 713.09845 19575.13714     56         23   1112412
## 6       1         901   0.00000     0.00000     56          0   1112412
##   AREAUSED       est      est.var    est.se    est.cv      pse  CI99left
## 1  1112412  15435672 9.700801e+13   9849265 0.6380846 63.80846         0
## 2  1112412 171222876 1.460916e+16 120868349 0.7059124 70.59124         0
## 3  1112412 118655149 6.268127e+15  79171501 0.6672403 66.72403         0
## 4  1112412  43001325 9.847089e+14  31380072 0.7297466 72.97466         0
## 5  1112412 793259527 2.422347e+16 155638920 0.1962018 19.62018 392360235
## 6  1112412         0 0.000000e+00         0       NaN      NaN         0
##    CI99right  CI95left  CI95right  CI68left CI68right
## 1   40805697         0   34739876   5640993  25230351
## 2  482559110         0  408120486  51024394 291421358
## 3  322587423         0  273828441  39922426 197387873
## 4  123831035         0  104505137  11795164  74207485
## 5 1194158819 488212849 1098306206 638483176 948035879
## 6          0         0          0         0         0</code></pre>
</details>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" tabindex="-1"></a><span class="fu">head</span>(raw3<span class="sc">$</span>rowest)        <span class="co"># estimates by row for population (i.e., WY)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## NULL</code></pre>
</details>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" tabindex="-1"></a><span class="do">## Titles (list object) for estimate</span></span>
<span id="cb97-2"><a href="#cb97-2" tabindex="-1"></a>titlelst3 <span class="ot">&lt;-</span> tree3<span class="sc">$</span>titlelst</span>
<span id="cb97-3"><a href="#cb97-3" tabindex="-1"></a><span class="fu">names</span>(titlelst3)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##  [1] &quot;title.estpse&quot;  &quot;title.yvar&quot;    &quot;title.estvar&quot;  &quot;title.unitvar&quot;
##  [5] &quot;title.ref&quot;     &quot;outfn.estpse&quot;  &quot;outfn.rawdat&quot;  &quot;outfn.param&quot;  
##  [9] &quot;title.rowvar&quot;  &quot;title.row&quot;     &quot;title.unitsn&quot;</code></pre>
</details>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" tabindex="-1"></a>titlelst3</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## $title.estpse
## [1] &quot;Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia), in cubic feet, and percent sampling error on forest land by forest type&quot;
## 
## $title.yvar
## [1] &quot;Net volume, in cubic feet&quot;
## 
## $title.estvar
## [1] &quot;Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia)&quot;
## 
## $title.unitvar
## [1] &quot;ONEUNIT&quot;
## 
## $title.ref
## [1] &quot;Wyoming, 2011-2013&quot;
## 
## $outfn.estpse
## [1] &quot;tree_VOLCFNET_FORTYPCD_forestland&quot;
## 
## $outfn.rawdat
## [1] &quot;tree_VOLCFNET_FORTYPCD_forestland_rawdata&quot;
## 
## $outfn.param
## [1] &quot;tree_VOLCFNET_FORTYPCD_forestland_parameters&quot;
## 
## $title.rowvar
## [1] &quot;Forest type&quot;
## 
## $title.row
## [1] &quot;Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia), in cubic feet, on forest land by forest type; Wyoming, 2011-2013&quot;
## 
## $title.unitsn
## [1] &quot;cubic feet&quot;</code></pre>
</details>
<p>We can also create a simple barplot from the output:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" tabindex="-1"></a><span class="do">## Create barplot</span></span>
<span id="cb101-2"><a href="#cb101-2" tabindex="-1"></a><span class="fu">datBarplot</span>(</span>
<span id="cb101-3"><a href="#cb101-3" tabindex="-1"></a>      raw3<span class="sc">$</span>unit_rowest, </span>
<span id="cb101-4"><a href="#cb101-4" tabindex="-1"></a>      <span class="at">xvar =</span> titlelst3<span class="sc">$</span>title.rowvar, </span>
<span id="cb101-5"><a href="#cb101-5" tabindex="-1"></a>      <span class="at">yvar =</span> <span class="st">&quot;est&quot;</span></span>
<span id="cb101-6"><a href="#cb101-6" tabindex="-1"></a>      )</span></code></pre></div>
<details>
<summary>
plot
</summary>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</details>
<p>And a fancier barplot:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" tabindex="-1"></a><span class="do">## Create fancier barplot</span></span>
<span id="cb102-2"><a href="#cb102-2" tabindex="-1"></a><span class="fu">datBarplot</span>(</span>
<span id="cb102-3"><a href="#cb102-3" tabindex="-1"></a>      raw3<span class="sc">$</span>unit_rowest, </span>
<span id="cb102-4"><a href="#cb102-4" tabindex="-1"></a>      <span class="at">xvar =</span> titlelst3<span class="sc">$</span>title.rowvar, </span>
<span id="cb102-5"><a href="#cb102-5" tabindex="-1"></a>      <span class="at">yvar =</span> <span class="st">&quot;est&quot;</span>,</span>
<span id="cb102-6"><a href="#cb102-6" tabindex="-1"></a>      <span class="at">errbars =</span> <span class="cn">TRUE</span>, </span>
<span id="cb102-7"><a href="#cb102-7" tabindex="-1"></a>      <span class="at">sevar =</span> <span class="st">&quot;est.se&quot;</span>, </span>
<span id="cb102-8"><a href="#cb102-8" tabindex="-1"></a>      <span class="at">main =</span> FIESTAutils<span class="sc">::</span><span class="fu">wraptitle</span>(titlelst3<span class="sc">$</span>title.row, <span class="dv">75</span>),</span>
<span id="cb102-9"><a href="#cb102-9" tabindex="-1"></a>      <span class="at">ylabel =</span> titlelst3<span class="sc">$</span>title.yvar, </span>
<span id="cb102-10"><a href="#cb102-10" tabindex="-1"></a>      <span class="at">divideby =</span> <span class="st">&quot;million&quot;</span></span>
<span id="cb102-11"><a href="#cb102-11" tabindex="-1"></a>      )</span></code></pre></div>
<details>
<summary>
plot
</summary>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</details>
</details>
</div>
<div id="example-9-net-cubic-foot-volume-of-live-trees-by-forest-type-and-stand-size-class-wyoming-2011-2013" class="section level4">
<h4>Example 9: Net cubic-foot volume of live trees by forest type and
stand-size class, Wyoming, 2011-2013</h4>
<details>
<summary>
View Example
</summary>
<p>This examples adds rows and columns to the output, including FIA
names, for net cubic-foot volume of live trees (at least 5 inches
diameter) by forest type and stand-size class, Wyoming, 2011-2013. We
also use the <code>*_options</code> functions to return output with
estimates (est) and percent standard error (pse) in same cell - est(pse)
with <code>allin1 = TRUE</code> and save data to an outfolder with
<code>savedata = TRUE</code> and <code>outfolder = outfolder</code>.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" tabindex="-1"></a>tree4 <span class="ot">&lt;-</span> <span class="fu">modMAtree</span>(</span>
<span id="cb103-2"><a href="#cb103-2" tabindex="-1"></a>    <span class="at">MApopdat =</span> MApopdat,         <span class="co"># pop - population calculations</span></span>
<span id="cb103-3"><a href="#cb103-3" tabindex="-1"></a>    <span class="at">MAmethod =</span> <span class="st">&quot;greg&quot;</span>,           <span class="co"># est - model-assisted method</span></span>
<span id="cb103-4"><a href="#cb103-4" tabindex="-1"></a>    <span class="at">landarea =</span> <span class="st">&quot;FOREST&quot;</span>,         <span class="co"># est - forest land filter</span></span>
<span id="cb103-5"><a href="#cb103-5" tabindex="-1"></a>    <span class="at">estvar =</span> <span class="st">&quot;VOLCFNET&quot;</span>,               <span class="co"># est - net cubic-foot volume</span></span>
<span id="cb103-6"><a href="#cb103-6" tabindex="-1"></a>    <span class="at">estvar.filter =</span> <span class="st">&quot;STATUSCD  == 1&quot;</span>,   <span class="co"># est - live trees only</span></span>
<span id="cb103-7"><a href="#cb103-7" tabindex="-1"></a>    <span class="at">rowvar =</span> <span class="st">&quot;FORTYPCD&quot;</span>,         <span class="co"># est - row domain</span></span>
<span id="cb103-8"><a href="#cb103-8" tabindex="-1"></a>    <span class="at">colvar =</span> <span class="st">&quot;STDSZCD&quot;</span>,          <span class="co"># est - column domain</span></span>
<span id="cb103-9"><a href="#cb103-9" tabindex="-1"></a>    <span class="at">returntitle =</span> <span class="cn">TRUE</span>,          <span class="co"># out - return title information</span></span>
<span id="cb103-10"><a href="#cb103-10" tabindex="-1"></a>    <span class="at">savedata =</span> <span class="cn">TRUE</span>,             <span class="co"># out - save data to outfolder</span></span>
<span id="cb103-11"><a href="#cb103-11" tabindex="-1"></a>    <span class="at">table_opts =</span> <span class="fu">table_options</span>(</span>
<span id="cb103-12"><a href="#cb103-12" tabindex="-1"></a>      <span class="at">row.FIAname =</span> <span class="cn">TRUE</span>,          <span class="co"># est - row domain names</span></span>
<span id="cb103-13"><a href="#cb103-13" tabindex="-1"></a>      <span class="at">col.FIAname =</span> <span class="cn">TRUE</span>,          <span class="co"># est - column domain names</span></span>
<span id="cb103-14"><a href="#cb103-14" tabindex="-1"></a>      <span class="at">allin1 =</span> <span class="cn">TRUE</span>                <span class="co"># out - return output with est(pse)</span></span>
<span id="cb103-15"><a href="#cb103-15" tabindex="-1"></a>    ),</span>
<span id="cb103-16"><a href="#cb103-16" tabindex="-1"></a>    <span class="at">savedata_opts =</span> <span class="fu">savedata_options</span>(</span>
<span id="cb103-17"><a href="#cb103-17" tabindex="-1"></a>      <span class="at">outfolder =</span> outfolder,       <span class="co"># out - outfolder for saving data</span></span>
<span id="cb103-18"><a href="#cb103-18" tabindex="-1"></a>      <span class="at">outfn.pre =</span> <span class="st">&quot;WY&quot;</span>             <span class="co"># out - prefix for output files</span></span>
<span id="cb103-19"><a href="#cb103-19" tabindex="-1"></a>      )</span>
<span id="cb103-20"><a href="#cb103-20" tabindex="-1"></a>    )</span></code></pre></div>
<p>Again, we investigate the output of the returned list:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" tabindex="-1"></a><span class="do">## Look at output list from modGBarea()</span></span>
<span id="cb104-2"><a href="#cb104-2" tabindex="-1"></a><span class="fu">names</span>(tree4)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## [1] &quot;est&quot;      &quot;pse&quot;      &quot;titlelst&quot; &quot;raw&quot;      &quot;statecd&quot;  &quot;invyr&quot;</code></pre>
</details>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" tabindex="-1"></a><span class="do">## Estimate and percent sampling error of estimate</span></span>
<span id="cb106-2"><a href="#cb106-2" tabindex="-1"></a>tree4<span class="sc">$</span>est</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##                         Forest type         Large diameter
## 1:                      Douglas-fir  11,901,294.4 ( 79.00)
## 2:                 Engelmann spruce 131,986,088.6 ( 78.83)
## 3: Engelmann spruce / subalpine fir  99,286,096.2 ( 79.52)
## 4:                    Subalpine fir  43,001,324.8 ( 72.97)
## 5:                   Lodgepole pine 392,479,077.5 ( 34.99)
## 6:                            Aspen            -- (    --)
## 7:                       Nonstocked            -- (    --)
## 8:                            Total 678,653,881.6 ( 24.01)
##           Medium diameter        Small diameter  Nonstocked
## 1:            -- (    --)  3,534,377.8 ( 99.12) -- (    --)
## 2:  39,236,787.7 (175.15)           -- (    --) -- (    --)
## 3:  14,393,410.2 ( 66.30)  4,975,642.9 ( 71.46) -- (    --)
## 4:            -- (    --)           -- (    --) -- (    --)
## 5: 394,877,667.0 ( 21.98)  5,902,782.7 ( 76.80) -- (    --)
## 6:            -- (    --)           -- (    --) -- (    --)
## 7:            -- (    --)           -- (    --) -- (    --)
## 8: 448,507,864.9 ( 23.85) 14,412,803.4 ( 42.87) -- (    --)
##                       Total
## 1:    15,435,672.3 ( 63.81)
## 2:   171,222,876.3 ( 70.59)
## 3:   118,655,149.3 ( 66.72)
## 4:    43,001,324.8 ( 72.97)
## 5:   793,259,527.2 ( 19.62)
## 6:              -- (    --)
## 7:              -- (    --)
## 8: 1,141,574,549.9 ( 15.04)</code></pre>
</details>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" tabindex="-1"></a><span class="do">## Raw data (list object) for estimate</span></span>
<span id="cb108-2"><a href="#cb108-2" tabindex="-1"></a>raw4 <span class="ot">&lt;-</span> tree4<span class="sc">$</span>raw      <span class="co"># extract raw data list object from output</span></span>
<span id="cb108-3"><a href="#cb108-3" tabindex="-1"></a><span class="fu">names</span>(raw4)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##  [1] &quot;unit_totest&quot;   &quot;unit_rowest&quot;   &quot;unit_colest&quot;   &quot;unit_grpest&quot;  
##  [5] &quot;domdat&quot;        &quot;plotweights&quot;   &quot;estvar&quot;        &quot;estvar.filter&quot;
##  [9] &quot;module&quot;        &quot;esttype&quot;       &quot;MAmethod&quot;      &quot;predselectlst&quot;
## [13] &quot;rowvar&quot;        &quot;colvar&quot;        &quot;areaunits&quot;     &quot;estunits&quot;</code></pre>
</details>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>unit_totest)   <span class="co"># estimates by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   ONEUNIT     nhat nhat.var NBRPLT NBRPLT.gt0 ACRES_GIS AREAUSED        est
## 1       1 1026.215 23835.98     56         34   1112412  1112412 1141574550
##       est.var    est.se    est.cv      pse  CI99left  CI99right  CI95left
## 1 2.94961e+16 171744283 0.1504451 15.04451 699190593 1583958507 804961940
##    CI95right  CI68left  CI68right
## 1 1478187159 970782094 1312367006</code></pre>
</details>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>totest)        <span class="co"># estimates for population (i.e., WY)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## NULL</code></pre>
</details>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>unit_rowest)   <span class="co"># estimates by row, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   ONEUNIT                      Forest type      nhat    nhat.var NBRPLT
## 1       1                      Douglas-fir  13.87585    78.39277     56
## 2       1                 Engelmann spruce 153.92033 11805.74969     56
## 3       1 Engelmann spruce / subalpine fir 106.66472  5065.31148     56
## 4       1                    Subalpine fir  38.65592   795.74932     56
## 5       1                   Lodgepole pine 713.09845 19575.13714     56
## 6       1                            Aspen   0.00000     0.00000     56
##   NBRPLT.gt0 FORTYPCD ACRES_GIS AREAUSED       est      est.var    est.se
## 1          2      201   1112412  1112412  15435672 9.700801e+13   9849265
## 2          4      265   1112412  1112412 171222876 1.460916e+16 120868349
## 3          5      266   1112412  1112412 118655149 6.268127e+15  79171501
## 4          2      268   1112412  1112412  43001325 9.847089e+14  31380072
## 5         23      281   1112412  1112412 793259527 2.422347e+16 155638920
## 6          0      901   1112412  1112412         0 0.000000e+00         0
##      est.cv      pse  CI99left  CI99right  CI95left  CI95right  CI68left
## 1 0.6380846 63.80846         0   40805697         0   34739876   5640993
## 2 0.7059124 70.59124         0  482559110         0  408120486  51024394
## 3 0.6672403 66.72403         0  322587423         0  273828441  39922426
## 4 0.7297466 72.97466         0  123831035         0  104505137  11795164
## 5 0.1962018 19.62018 392360235 1194158819 488212849 1098306206 638483176
## 6       NaN      NaN         0          0         0          0         0
##   CI68right
## 1  25230351
## 2 291421358
## 3 197387873
## 4  74207485
## 5 948035879
## 6         0</code></pre>
</details>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>rowest)        <span class="co"># estimates by row for population (i.e., WY)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## NULL</code></pre>
</details>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>unit_colest)   <span class="co"># estimates by column, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   ONEUNIT Stand-size class      nhat    nhat.var NBRPLT NBRPLT.gt0 STDSZCD
## 1       1   Large diameter 610.07402 21448.59554     56         18       1
## 2       1  Medium diameter 403.18490  9244.44106     56         14       2
## 3       1   Small diameter  12.95635    30.85557     56          4       3
## 4       1       Nonstocked   0.00000     0.00000     56          0       5
##   ACRES_GIS AREAUSED       est      est.var    est.se    est.cv      pse
## 1   1112412  1112412 678653882 2.654181e+16 162916561 0.2400584 24.00584
## 2   1112412  1112412 448507865 1.143964e+16 106956241 0.2384713 23.84713
## 3   1112412  1112412  14412803 3.818257e+13   6179205 0.4287302 42.87302
## 4   1112412  1112412         0 0.000000e+00         0       NaN      NaN
##    CI99left  CI99right  CI95left CI95right  CI68left CI68right
## 1 259008631 1098299132 359343290 997964473 516640224 840667539
## 2 173006845  724008885 238877484 658138246 342144388 554871342
## 3         0   30329380   2301785  26523822   8267845  20557762
## 4         0          0         0         0         0         0</code></pre>
</details>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>colest)        <span class="co"># estimates by column for population (i.e., WY)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## NULL</code></pre>
</details>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>unit_grpest)   <span class="co"># estimates by row and column, by estimation unit (i.e., ESTN_UNIT)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##   ONEUNIT                                           grpvar       nhat
## 1       1                       Douglas-fir#Large diameter  10.698636
## 2       1                       Douglas-fir#Small diameter   3.177219
## 3       1                  Engelmann spruce#Large diameter 118.648528
## 4       1                 Engelmann spruce#Medium diameter  35.271801
## 5       1  Engelmann spruce / subalpine fir#Large diameter  89.252961
## 6       1 Engelmann spruce / subalpine fir#Medium diameter  12.938916
##      nhat.var NBRPLT NBRPLT.gt0                      Forest type
## 1   71.436815     56          1                      Douglas-fir
## 2    9.917964     56          1                      Douglas-fir
## 3 8748.214215     56          3                 Engelmann spruce
## 4 3816.641843     56          1                 Engelmann spruce
## 5 5037.268404     56          3 Engelmann spruce / subalpine fir
## 6   73.597319     56          1 Engelmann spruce / subalpine fir
##   Stand-size class STDSZCD FORTYPCD ACRES_GIS AREAUSED       est      est.var
## 1   Large diameter       1      201   1112412  1112412  11901294 8.840029e+13
## 2   Small diameter       3      201   1112412  1112412   3534378 1.227310e+13
## 3   Large diameter       1      265   1112412  1112412 131986089 1.082558e+16
## 4  Medium diameter       2      265   1112412  1112412  39236788 4.722946e+15
## 5   Large diameter       1      266   1112412  1112412  99286096 6.233424e+15
## 6  Medium diameter       2      266   1112412  1112412  14393410 9.107383e+13
##      est.se    est.cv       pse CI99left CI99right CI95left CI95right
## 1   9402143 0.7900101  79.00101        0  36119609        0  30329156
## 2   3503298 0.9912064  99.12064        0  12558275        0  10400715
## 3 104046028 0.7883106  78.83106        0 399990898        0 335912557
## 4  68723696 1.7515118 175.15118        0 216257297        0 173932756
## 5  78952039 0.7951973  79.51973        0 302653071        0 254029249
## 6   9543261 0.6630299  66.30299        0  38975222        0  33097858
##      CI68left CI68right
## 1  2551259.40  21251329
## 2    50495.71   7018260
## 3 28516695.39 235455482
## 4        0.00 107579609
## 5 20771618.84 177800573
## 6  4903039.08  23883781</code></pre>
</details>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" tabindex="-1"></a><span class="fu">head</span>(raw4<span class="sc">$</span>grpest)        <span class="co"># estimates by row and column for population (i.e., WY)</span></span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## NULL</code></pre>
</details>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" tabindex="-1"></a><span class="do">## Titles (list object) for estimate</span></span>
<span id="cb126-2"><a href="#cb126-2" tabindex="-1"></a>titlelst4 <span class="ot">&lt;-</span> tree4<span class="sc">$</span>titlelst</span>
<span id="cb126-3"><a href="#cb126-3" tabindex="-1"></a><span class="fu">names</span>(titlelst4)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##  [1] &quot;title.estpse&quot;  &quot;title.yvar&quot;    &quot;title.estvar&quot;  &quot;title.unitvar&quot;
##  [5] &quot;title.ref&quot;     &quot;outfn.estpse&quot;  &quot;outfn.rawdat&quot;  &quot;outfn.param&quot;  
##  [9] &quot;title.rowvar&quot;  &quot;title.row&quot;     &quot;title.colvar&quot;  &quot;title.col&quot;    
## [13] &quot;title.unitsn&quot;</code></pre>
</details>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" tabindex="-1"></a>titlelst4</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## $title.estpse
## [1] &quot;Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia), in cubic feet (percent sampling error), by forest type and stand-size class on forest land&quot;
## 
## $title.yvar
## [1] &quot;Net volume, in cubic feet&quot;
## 
## $title.estvar
## [1] &quot;Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia)&quot;
## 
## $title.unitvar
## [1] &quot;ONEUNIT&quot;
## 
## $title.ref
## [1] &quot;Wyoming, 2011-2013&quot;
## 
## $outfn.estpse
## [1] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland&quot;
## 
## $outfn.rawdat
## [1] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata&quot;
## 
## $outfn.param
## [1] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_parameters&quot;
## 
## $title.rowvar
## [1] &quot;Forest type&quot;
## 
## $title.row
## [1] &quot;Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia), in cubic feet (percent sampling error), by forest type on forest land; Wyoming, 2011-2013&quot;
## 
## $title.colvar
## [1] &quot;Stand-size class&quot;
## 
## $title.col
## [1] &quot;Net merchantable bole  wood volume of live trees (timber species at least 5 inch dia), in cubic feet (percent sampling error), by stand-size class on forest land; Wyoming, 2011-2013&quot;
## 
## $title.unitsn
## [1] &quot;cubic feet&quot;</code></pre>
</details>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" tabindex="-1"></a><span class="do">## List output files in outfolder</span></span>
<span id="cb130-2"><a href="#cb130-2" tabindex="-1"></a><span class="fu">list.files</span>(outfolder, <span class="at">pattern =</span> <span class="st">&quot;WY_tree&quot;</span>)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## [1] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland.csv&quot;                
## [2] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_modMA_mase_greg.csv&quot;</code></pre>
</details>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="fu">paste0</span>(outfolder, <span class="st">&quot;/rawdata&quot;</span>), <span class="at">pattern =</span> <span class="st">&quot;WY_tree&quot;</span>)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##  [1] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata_colest.csv&quot;                     
##  [2] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata_domdat.csv&quot;                     
##  [3] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata_grpest.csv&quot;                     
##  [4] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_domdat.csv&quot;     
##  [5] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_colest.csv&quot;
##  [6] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_grpest.csv&quot;
##  [7] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_rowest.csv&quot;
##  [8] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata_modMA_mase_greg_unit_totest.csv&quot;
##  [9] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata_rowest.csv&quot;                     
## [10] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata_totest.csv&quot;                     
## [11] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata_unit_colest.csv&quot;                
## [12] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata_unit_grpest.csv&quot;                
## [13] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata_unit_rowest.csv&quot;                
## [14] &quot;WY_tree_VOLCFNET_FORTYPNM_STDSZNM_forestland_rawdata_unit_totest.csv&quot;</code></pre>
</details>
</details>
</div>
<div id="example-10-number-of-live-trees-by-species-wyoming-2011-2013" class="section level4">
<h4>Example 10: Number of live trees by species, Wyoming, 2011-2013</h4>
<details>
<summary>
View Example
</summary>
<p>We can use tree domain in estimation output rows:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" tabindex="-1"></a><span class="do">## Number of live trees (at least 1 inch diameter) by species</span></span>
<span id="cb134-2"><a href="#cb134-2" tabindex="-1"></a>tree5 <span class="ot">&lt;-</span> <span class="fu">modMAtree</span>(</span>
<span id="cb134-3"><a href="#cb134-3" tabindex="-1"></a>    <span class="at">MApopdat =</span> MApopdat,         <span class="co"># pop - population calculations</span></span>
<span id="cb134-4"><a href="#cb134-4" tabindex="-1"></a>    <span class="at">MAmethod =</span> <span class="st">&quot;greg&quot;</span>,           <span class="co"># est - model-assisted method</span></span>
<span id="cb134-5"><a href="#cb134-5" tabindex="-1"></a>    <span class="at">landarea =</span> <span class="st">&quot;FOREST&quot;</span>,         <span class="co"># est - forest land filter</span></span>
<span id="cb134-6"><a href="#cb134-6" tabindex="-1"></a>    <span class="at">estvar =</span> <span class="st">&quot;TPA_UNADJ&quot;</span>,               <span class="co"># est - number of trees per acre </span></span>
<span id="cb134-7"><a href="#cb134-7" tabindex="-1"></a>    <span class="at">estvar.filter =</span> <span class="st">&quot;STATUSCD == 1&quot;</span>,    <span class="co"># est - live trees only</span></span>
<span id="cb134-8"><a href="#cb134-8" tabindex="-1"></a>    <span class="at">rowvar =</span> <span class="st">&quot;SPCD&quot;</span>,             <span class="co"># est - row domain</span></span>
<span id="cb134-9"><a href="#cb134-9" tabindex="-1"></a>    <span class="at">returntitle =</span> <span class="cn">TRUE</span>,          <span class="co"># out - return title information</span></span>
<span id="cb134-10"><a href="#cb134-10" tabindex="-1"></a>    <span class="at">table_opts =</span> <span class="fu">table_options</span>(    </span>
<span id="cb134-11"><a href="#cb134-11" tabindex="-1"></a>      <span class="at">row.FIAname =</span> <span class="cn">TRUE</span>,          <span class="co"># est - row domain names</span></span>
<span id="cb134-12"><a href="#cb134-12" tabindex="-1"></a>      <span class="at">allin1 =</span> <span class="cn">FALSE</span>               <span class="co"># out - return output with est and pse</span></span>
<span id="cb134-13"><a href="#cb134-13" tabindex="-1"></a>      )</span>
<span id="cb134-14"><a href="#cb134-14" tabindex="-1"></a>    )</span></code></pre></div>
<p>We can also look at the output list and estimates again:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" tabindex="-1"></a><span class="do">## Look at output list</span></span>
<span id="cb135-2"><a href="#cb135-2" tabindex="-1"></a><span class="fu">names</span>(tree5)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## [1] &quot;est&quot;      &quot;titlelst&quot; &quot;raw&quot;      &quot;statecd&quot;  &quot;invyr&quot;</code></pre>
</details>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" tabindex="-1"></a><span class="do">## Estimate and percent sampling error of estimate</span></span>
<span id="cb137-2"><a href="#cb137-2" tabindex="-1"></a>tree5<span class="sc">$</span>est</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##            Species    Estimate Percent Sampling Error
## 1    quaking aspen  11153476.9                  73.73
## 2      limber pine   4461866.7                  90.07
## 3 Engelmann spruce  50806944.2                  29.77
## 4    subalpine fir  68658860.9                  29.14
## 5   lodgepole pine 184898322.4                  18.59
## 6      Douglas-fir    24655901                  73.84
## 7            Total 344635372.3                  13.07</code></pre>
</details>
</details>
</div>
<div id="example-11-number-of-live-trees-plus-seedlings-by-species-wyoming-2011-2013" class="section level4">
<h4>Example 11: Number of live trees (plus seedlings) by species,
Wyoming, 2011-2013</h4>
<details>
<summary>
View Example
</summary>
<p>We can also add seedlings.</p>
<p>Note: seedling data are only available for number of trees (estvar =
TPA_UNADJ).</p>
<p>Note: must include seedling data in population data calculations.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" tabindex="-1"></a>MApopdat_seed <span class="ot">&lt;-</span> <span class="fu">modMApop</span>(<span class="at">popTabs =</span> <span class="fu">list</span>(<span class="at">tree =</span> WYtree,</span>
<span id="cb139-2"><a href="#cb139-2" tabindex="-1"></a>                                         <span class="at">cond =</span> WYcond,</span>
<span id="cb139-3"><a href="#cb139-3" tabindex="-1"></a>                                         <span class="at">seed =</span> WYseed),</span>
<span id="cb139-4"><a href="#cb139-4" tabindex="-1"></a>                     <span class="at">pltassgn =</span> WYpltassgn,</span>
<span id="cb139-5"><a href="#cb139-5" tabindex="-1"></a>                     <span class="at">auxdat =</span> modeldat)</span></code></pre></div>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" tabindex="-1"></a><span class="do">## Number of live trees by species, including seedlings</span></span>
<span id="cb140-2"><a href="#cb140-2" tabindex="-1"></a>tree6 <span class="ot">&lt;-</span> <span class="fu">modMAtree</span>(</span>
<span id="cb140-3"><a href="#cb140-3" tabindex="-1"></a>    <span class="at">MApopdat =</span> MApopdat_seed,         <span class="co"># pop - population calculations</span></span>
<span id="cb140-4"><a href="#cb140-4" tabindex="-1"></a>    <span class="at">MAmethod =</span> <span class="st">&quot;greg&quot;</span>,           <span class="co"># est - model-assisted method</span></span>
<span id="cb140-5"><a href="#cb140-5" tabindex="-1"></a>    <span class="at">estseed =</span> <span class="st">&quot;add&quot;</span>,             <span class="co"># est - add seedling data</span></span>
<span id="cb140-6"><a href="#cb140-6" tabindex="-1"></a>    <span class="at">landarea =</span> <span class="st">&quot;FOREST&quot;</span>,         <span class="co"># est - forest land filter</span></span>
<span id="cb140-7"><a href="#cb140-7" tabindex="-1"></a>    <span class="at">estvar =</span> <span class="st">&quot;TPA_UNADJ&quot;</span>,               <span class="co"># est - number of trees per acre </span></span>
<span id="cb140-8"><a href="#cb140-8" tabindex="-1"></a>    <span class="at">estvar.filter =</span> <span class="st">&quot;STATUSCD == 1&quot;</span>,    <span class="co"># est - live trees only</span></span>
<span id="cb140-9"><a href="#cb140-9" tabindex="-1"></a>    <span class="at">rowvar =</span> <span class="st">&quot;SPCD&quot;</span>,             <span class="co"># est - row domain</span></span>
<span id="cb140-10"><a href="#cb140-10" tabindex="-1"></a>    <span class="at">returntitle =</span> <span class="cn">TRUE</span>,          <span class="co"># out - return title information</span></span>
<span id="cb140-11"><a href="#cb140-11" tabindex="-1"></a>    <span class="at">table_opts =</span> <span class="fu">table_options</span>(</span>
<span id="cb140-12"><a href="#cb140-12" tabindex="-1"></a>      <span class="at">row.FIAname =</span> <span class="cn">TRUE</span>,          <span class="co"># est - row domain names</span></span>
<span id="cb140-13"><a href="#cb140-13" tabindex="-1"></a>      <span class="at">allin1 =</span> <span class="cn">FALSE</span>)              <span class="co"># out - return output with est and pse</span></span>
<span id="cb140-14"><a href="#cb140-14" tabindex="-1"></a>    )</span></code></pre></div>
<p>And again we can look at our outputs and compare estimates:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" tabindex="-1"></a><span class="do">## Look at output list</span></span>
<span id="cb141-2"><a href="#cb141-2" tabindex="-1"></a><span class="fu">names</span>(tree6)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>## [1] &quot;est&quot;      &quot;titlelst&quot; &quot;raw&quot;      &quot;statecd&quot;  &quot;invyr&quot;</code></pre>
</details>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" tabindex="-1"></a><span class="do">## Estimate and percent sampling error of estimate</span></span>
<span id="cb143-2"><a href="#cb143-2" tabindex="-1"></a>tree6<span class="sc">$</span>est</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##            Species    Estimate Percent Sampling Error
## 1    subalpine fir 396440112.5                  23.94
## 2 Engelmann spruce 107965157.9                  33.92
## 3   lodgepole pine 251790363.6                  18.03
## 4      limber pine  38477186.7                  92.27
## 5      Douglas-fir  49218941.8                  80.24
## 6    quaking aspen 105867206.7                  60.84
## 7            Total 949758969.2                  16.07</code></pre>
</details>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" tabindex="-1"></a><span class="do">## Compare estimates with and without seedlings</span></span>
<span id="cb145-2"><a href="#cb145-2" tabindex="-1"></a><span class="fu">head</span>(tree5<span class="sc">$</span>est)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##            Species    Estimate Percent Sampling Error
## 1    quaking aspen  11153476.9                  73.73
## 2      limber pine   4461866.7                  90.07
## 3 Engelmann spruce  50806944.2                  29.77
## 4    subalpine fir  68658860.9                  29.14
## 5   lodgepole pine 184898322.4                  18.59
## 6      Douglas-fir    24655901                  73.84</code></pre>
</details>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" tabindex="-1"></a><span class="fu">head</span>(tree6<span class="sc">$</span>est)</span></code></pre></div>
<details>
<summary>
output
</summary>
<pre><code>##            Species    Estimate Percent Sampling Error
## 1    subalpine fir 396440112.5                  23.94
## 2 Engelmann spruce 107965157.9                  33.92
## 3   lodgepole pine 251790363.6                  18.03
## 4      limber pine  38477186.7                  92.27
## 5      Douglas-fir  49218941.8                  80.24
## 6    quaking aspen 105867206.7                  60.84</code></pre>
</details>
</details>
<!-- #### Example 11: Number of seedlings by species, Wyoming, 2011-2013 -->
<!-- Of course, we can also look at *only* seedlings. -->
<!-- Note: seedling data are only available for number of trees (estvar = TPA_UNADJ). -->
<!-- Note: must include seedling data in population data calculations. -->
<!-- ```{r} -->
<!-- ## Number of live trees seedlings by species -->
<!-- tree7 <- modMAtree( -->
<!--     MApopdat = MApopdat_seed,         # pop - population calculations -->
<!--     MAmethod = "greg",           # est - model-assisted method -->
<!--     estseed = "only",            # est - add seedling data -->
<!--     landarea = "FOREST",         # est - forest land filter -->
<!--     estvar = "TPA_UNADJ",        # est - number of trees per acre  -->
<!--     rowvar = "SPCD",             # est - row domain -->
<!--     returntitle = TRUE,          # out - return title information -->
<!--     table_opts = table_options( -->
<!--       row.FIAname = TRUE,          # est - row domain names -->
<!--       allin1 = FALSE               # out - return output with est and pse -->
<!--       ) -->
<!--     ) -->
<!-- ``` -->
<!-- And again we can look at our outputs and compare estimates: -->
<!-- ```{r} -->
<!-- ## Look at output list -->
<!-- names(tree7) -->
<!-- ## Estimate and percent sampling error of estimate -->
<!-- tree7$est -->
<!-- ## Compare estimates with, without, and only seedlings -->
<!-- head(tree5$est) -->
<!-- head(tree6$est) -->
<!-- head(tree7$est) -->
<!-- ``` -->
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
